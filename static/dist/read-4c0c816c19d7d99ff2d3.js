(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{160:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",[e._v("メーリス一覧")]),e._v(" "),s("searchform",{on:{search:e.search}}),e._v(" "),e._l(e.messages,(function(e){return s("one-content",{key:e.id,attrs:{message:e}})})),e._v(" "),s("infinite-loading",{attrs:{spinner:"circles",identifier:e.searchData},on:{infinite:e.infiniteLoad}},[s("div",{staticClass:"text-center alert alert-secondary my-2 p-2",attrs:{slot:"no-more"},slot:"no-more"},[e._v("\n      メーリスは以上です\n    ")]),e._v(" "),s("div",{staticClass:"text-center alert alert-secondary my-2 p-2",attrs:{slot:"no-results"},slot:"no-results"},[e._v("\n       表示できるメーリスはありませんでした\n    ")])])],2)};a._withStripped=!0;var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"content row border-bottom",attrs:{id:"message-id-"+String(e.message.id)}},[s("h4",{staticClass:"col-12 my-1"},[s("router-link",{attrs:{to:e.link}},[e._v(e._s(e.message.id))])],1),e._v(" "),s("div",{staticClass:"col-12"},[s("span",{staticClass:"float-left date small p-1"},[e._v(e._s(e.message.created_at))]),e._v(" "),s("span",{staticClass:"float-left ml-4 whosent"},[e._v(e._s(e.message.writer))]),e._v(" "),s("bookmark-star",{attrs:{id:Number(e.message.id),is_bookmarked:e.message.is_bookmarked}})],1),e._v(" "),s("article",{staticClass:"col-12 my-2"},[e._v("\n    "+e._s(e._f("trim")(e.message.content))+"\n  ")])])};i._withStripped=!0;var n=s(172),r={props:{message:{type:Object,required:!0}},components:{bookmarkStar:n.a},filters:{trim(e){let t=e.indexOf("\n");return t<0&&(t=0),e.slice(t,t+200)}},computed:{link(){return"./content/"+String(this.message.id)+"/"}}},o=(s(173),s(8)),l=Object(o.a)(r,i,[],!1,null,"2af44e69",null);l.options.__file="front/components/board/index-one-content.vue";var c=l.exports,d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"content row pb-3 border-bottom",on:{submit:e.submit}},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.is_kaisei,expression:"is_kaisei"}],staticClass:"d-none",attrs:{type:"checkbox",name:"is_kaisei",id:"is_kaisei"},domProps:{checked:Array.isArray(e.is_kaisei)?e._i(e.is_kaisei,null)>-1:e.is_kaisei},on:{change:[function(t){var s=e.is_kaisei,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.is_kaisei=s.concat([null])):n>-1&&(e.is_kaisei=s.slice(0,n).concat(s.slice(n+1)))}else e.is_kaisei=i},e.toggleChanged]}}),e._v(" "),s("label",{attrs:{for:"is_kaisei"}},[e._v("回生メーリスのみ:")])]),e._v(" "),s("div",{staticClass:"d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.is_zenkai,expression:"is_zenkai"}],staticClass:"d-none",attrs:{type:"checkbox",name:"is_zenkai",id:"is_zenkai"},domProps:{checked:Array.isArray(e.is_zenkai)?e._i(e.is_zenkai,null)>-1:e.is_zenkai},on:{change:[function(t){var s=e.is_zenkai,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.is_zenkai=s.concat([null])):n>-1&&(e.is_zenkai=s.slice(0,n).concat(s.slice(n+1)))}else e.is_zenkai=i},e.toggleChanged]}}),e._v(" "),s("label",{attrs:{for:"is_zenkai"}},[e._v("全回メーリスのみ:")])]),e._v(" "),s("div",{staticClass:"d-inline-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.is_bookmark,expression:"is_bookmark"}],staticClass:"d-none",attrs:{type:"checkbox",name:"is_bookmark",id:"is_bookmark"},domProps:{checked:Array.isArray(e.is_bookmark)?e._i(e.is_bookmark,null)>-1:e.is_bookmark},on:{change:[function(t){var s=e.is_bookmark,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=e._i(s,null);a.checked?n<0&&(e.is_bookmark=s.concat([null])):n>-1&&(e.is_bookmark=s.slice(0,n).concat(s.slice(n+1)))}else e.is_bookmark=i},e.toggleChanged]}}),e._v(" "),s("label",{attrs:{for:"is_bookmark"}},[e._v("ブックマークのみ:")])])]),e._v(" "),e.showButton?s("div",{staticClass:"col-12 my-2"},[s("input",{staticClass:"submit btn btn-warning btn-sm ml-2",attrs:{type:"submit",value:"絞り込み"}})]):e._e(),e._v(" "),s("div",{staticClass:"col-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"form-control formtext",attrs:{type:"text",name:"text",placeholder:"件名・本文で検索",id:"id_text"},domProps:{value:e.text},on:{input:function(t){t.target.composing||(e.text=t.target.value)}}}),e._v(" "),s("input",{staticClass:"submit btn btn-info btn-sm ml-2",attrs:{type:"submit",value:"検索"}})])])};d._withStripped=!0;var m={name:"searchform",data:()=>({is_kaisei:!1,is_zenkai:!1,is_bookmark:!1,text:"",showButton:!1}),methods:{toggleChanged(){this.showButton=!0},submit(e){e.preventDefault(),this.is_kaisei||this.is_kaisei||this.is_bookmark||(this.showButton=!1);const t={is_kaisei:this.is_kaisei,is_zenkai:this.is_zenkai,is_bookmark:this.is_bookmark,text:this.text};this.$emit("search",t)}}},h=(s(175),Object(o.a)(m,d,[],!1,null,"7e5bf265",null));h.options.__file="front/components/board/index-searchform.vue";var p={name:"index",components:{oneContent:c,searchform:h.exports},data:()=>({searchData:{}}),computed:{messages(){return this.$store.state.read.messages}},methods:{infiniteLoad(e){console.log(e),this.$store.dispatch("read/loadMessages",this.searchData).then(t=>{console.log(t),this.messages.length>0&&e.loaded(),!1===t.has_next&&e.complete()}).catch(t=>{console.log(t),e.error()})},search(e){this.$store.commit("read/clearMessages"),this.searchData=e}}},u=Object(o.a)(p,a,[],!1,null,null,null);u.options.__file="front/components/board/index.vue";t.default=u.exports},161:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.messageExists?s("div",[s("div",{staticClass:"message-title mb-2"},[s("router-back-arrow",{attrs:{href:"../../"}}),e._v(" "),s("h4",{staticClass:"d-inline-block m-0"},[e._v(e._s(e.message.title))])],1),e._v(" "),s("div",{staticClass:"col-sm-12 col-md-8 my-1 pl-0"},[s("span",{staticClass:"date d-inline-block"},[e._v(e._s(e.message.created_at))]),e._v(" "),s("span",{staticClass:"ml-4 whosent"},[e._v(e._s(e.message.writer))]),e._v(" "),s("bookmark-star",{attrs:{id:Number(e.message.id),is_bookmarked:e.message.is_bookmarked}})],1),e._v(" "),s("hr"),e._v(" "),s("div",{staticClass:"col-sm-12 col-md-8 content p-0",domProps:{innerHTML:e._s(e.message.html)}}),e._v(" "),e.attachments.length>0?[s("hr"),e._v(" "),s("div",{staticClass:"col-sm-12 col-md-8 my-1 pl-0"},[s("h6",[e._v("添付ファイル")]),e._v(" "),e._l(e.attachments,(function(t){return[t.is_image?s("img",{key:t.pk,staticStyle:{width:"100%","max-width":"560px"},attrs:{src:t.path}}):s("a",{key:t.pk,attrs:{href:"./attachment/"+t.pk+"/"}},[e._v("\n        "+e._s(t.filename)+"\n      ")])]}))],2)]:e._e(),e._v(" "),e.message.writer!=e.message.sender?[s("hr"),e._v(" "),s("p",{staticClass:"small"},[e._v("このメーリスは "+e._s(e.message.sender)+" によって代理送信されました。")])]:e._e(),e._v(" "),s("hr")],2):s("div",[e._v("\n  message does not exist\n")])};a._withStripped=!0;var i=s(172),n=s(177),r={props:{id:{type:Number,required:!0}},components:{bookmarkStar:i.a,routerBackArrow:n.default},data:()=>({messageExists:!1,message:{},attachments:[]}),created(){this.axios.get("/read/api/contentothers/"+String(this.id)+"/").then(e=>{console.log(e),this.attachments=e.data.attachments}).catch(e=>{console.log(e)});let e=this.$store.state.read.messages.find(e=>e.id==this.id);if(e)return this.messageExists=!0,void(this.message=e);console.log("直接アクセス"),this.axios.get("/read/api/content/"+String(this.id)+"/").then(e=>{console.log(e.data.message),this.messageExists=!0,this.message=e.data.message}).catch(e=>{console.log(e)})}},o=(s(180),s(8)),l=Object(o.a)(r,a,[],!1,null,"bcc59a6a",null);l.options.__file="front/components/board/content.vue";t.default=l.exports},162:function(e,t,s){var a=s(174);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(17).default)("2472e18e",a,!1,{})},163:function(e,t,s){var a=s(176);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(17).default)("6151ee26",a,!1,{})},164:function(e,t,s){"use strict";var a=s(165),i=s.n(a);t.default=i.a},165:function(e,t){e.exports={name:"router-back-arrow",props:{href:{type:String,required:!1,default:"../"}},methods:{onclick(){this.$router.push(this.href)}}}},166:function(e,t,s){var a=s(179);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(17).default)("247fce90",a,!1,{})},167:function(e,t,s){var a=s(181);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,s(17).default)("2e76ae06",a,!1,{})},172:function(e,t,s){"use strict";var a=function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"float-right",on:{click:this.onclick}},[this.bookmarked?t("img",{attrs:{src:"/static/img/star_yl.png",width:"16",height:"16"}}):t("img",{attrs:{src:"/static/img/star_bk.png",width:"16",height:"16"}})])};a._withStripped=!0;var i={props:{id:{type:Number,required:!0},is_bookmarked:{type:Boolean,required:!1,default:!1}},data:()=>({bookmarked:!1}),created(){this.bookmarked=this.is_bookmarked},methods:{onclick(){this.axios.post("/read/api/bookmark/"+String(this.id)+"/",{data:"data"}).then(e=>{this.bookmarked="true"===e.data["updated-to"],this.$store.commit("read/updateBookmarked",{id:this.id,bool:"true"===e.data["updated-to"]})})}}},n=s(8),r=Object(n.a)(i,a,[],!1,null,null,null);r.options.__file="front/components/board/bookmark-star.vue";t.a=r.exports},173:function(e,t,s){"use strict";var a=s(162);s.n(a).a},174:function(e,t,s){(t=s(13)(!1)).push([e.i,"\n.content article[data-v-2af44e69]{\r\n  display: block;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\n}\r\n",""]),e.exports=t},175:function(e,t,s){"use strict";var a=s(163);s.n(a).a},176:function(e,t,s){(t=s(13)(!1)).push([e.i,'\ninput.formtext[data-v-7e5bf265]{\r\n  display: inline-block;\r\n  width: calc(100% - 62px);\r\n  max-width: 400px;\n}\nlabel[data-v-7e5bf265]{\r\n    display: inline-block;\r\n    position: relative;\r\n    height: 1rem;\r\n    padding: 0.5rem 3rem 1rem 0;\r\n    margin: 0 0 0.5rem;\r\n    font-size: 0.7rem;\r\n    line-height: 0.7rem;\n}\nlabel[data-v-7e5bf265]:before{\r\n  display: inline-block;\r\n  content: "";\r\n  position: absolute;\r\n    right: 0.4rem;\r\n    top: 0.3rem;\r\n  width: 2.4rem;\r\n  height: 1.2rem;\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 1px solid #999;\r\n  border-radius: 1rem;\r\n  transition: 0.2s;\n}\nlabel[data-v-7e5bf265]:after{\r\n  display: block;\r\n  content: "";\r\n  position: absolute;\r\n  top: 0.44rem;\r\n  right: 1.7rem;\r\n  width: 0.9rem;\r\n  height: 0.9rem;\r\n  border-radius: 0.75rem;\r\n  background-color: #999;\r\n  transition: 0.2s;\n}\ninput:checked + label[data-v-7e5bf265]:before{\r\n  border-color: #0ee08a;\n}\ninput:checked + label[data-v-7e5bf265]:after{\r\n  right: 0.62rem;\r\n  background-color: #0ee08a;\n}\r\n\r\n',""]),e.exports=t},177:function(e,t,s){"use strict";var a=s(190),i=s(164),n=(s(178),s(8)),r=Object(n.a)(i.default,a.a,a.b,!1,null,"a8ed510e",null);r.options.__file="front/components/board/router-back-arrow.vue",t.default=r.exports},178:function(e,t,s){"use strict";var a=s(166);s.n(a).a},179:function(e,t,s){(t=s(13)(!1)).push([e.i,"\ndiv#back[data-v-a8ed510e]{\r\n  display: inline-block;\r\n  \r\n  height: 24px;\r\n  margin: 0 6px 0 0;\n}\n#back > span[data-v-a8ed510e]{\r\n  height: 24px;\r\n  width: 24px;\r\n  display: inline-block;\r\n  position: relative;\r\n  overflow: hidden;\r\n  margin: 0;\n}\n#back > span[data-v-a8ed510e]:before{\r\n  content: '';\r\n  height: 12px;\r\n  width: 12px;\r\n  display: block;\r\n  border: 1px solid #333;\r\n  border-right-width: 0;\r\n  border-bottom-width: 0;\r\n  transform: rotate(-45deg);\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 5px;\n}\n#back > span[data-v-a8ed510e]:after{\r\n  content: '';\r\n  height: 1px;\r\n  width: 20px;\r\n  display: block;\r\n  background: #333;\r\n  position: absolute;\r\n  top: 10.5px;\r\n  left: 3px;\n}\r\n",""]),e.exports=t},180:function(e,t,s){"use strict";var a=s(167);s.n(a).a},181:function(e,t,s){(t=s(13)(!1)).push([e.i,"\n.message-title > *[data-v-bcc59a6a]{\r\n  vertical-align: bottom;\n}\np.content[data-v-bcc59a6a]{\r\n  white-space: pre-line;\n}\r\n",""]),e.exports=t},190:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var a=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"back"}},[t("span",{on:{click:this.onclick}})])},i=[];a._withStripped=!0}}]);