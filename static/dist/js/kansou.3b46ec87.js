"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[941],{8103:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var s=t(6252),r=t(3577);const n=e=>((0,s.dD)("data-v-244f9831"),e=e(),(0,s.Cn)(),e),l=n((()=>(0,s._)("h3",null,"感想用紙",-1))),i={class:"pure-menu-heading"},u={class:"pure-menu-list"},o=["href"],d=["datetime"],c=n((()=>(0,s._)("br",null,null,-1))),m={class:"small"};function f(e,a,t,n,f,p){return(0,s.wg)(),(0,s.iD)("article",null,[l,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.yearsSet,(e=>((0,s.wg)(),(0,s.iD)("section",{key:e,class:"pure-menu-custom card"},[(0,s._)("h4",i,(0,r.zw)(e)+"年度",1),(0,s._)("ul",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.getItems(e),(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,class:"pure-menu-item kansou-item"},[(0,s._)("a",{href:`/download/kansou/${e.id}/`,target:"_blank"},(0,r.zw)(e.title)+" ( "+(0,r.zw)(e.size)+" ) ",9,o),(0,s._)("time",{datetime:e.performedAt,class:"small"},(0,r.zw)(n.displayDate(e.performedAt)),9,d),e.detail?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[c,(0,s._)("span",m,(0,r.zw)(e.detail),1)],64)):(0,s.kq)("",!0)])))),128))])])))),128))])}var p=t(5492),g=t(2262),k=t(8042),w=t(8637),h={setup(){const e=(0,w.oR)(),a=(0,g.qj)([]);k.Z.get("/api/kansou/").then((e=>{a.length=0,a.push(...e.data.kansou)})).catch((a=>{console.error(a.response),e.commit("message/addMessage",{level:"warning",message:"感想用紙のデータを取得できませんでした。",appname:"kansou/index"})}));const t=(0,s.Fl)((()=>a.map((e=>{const a=(0,p.Z)(e.performedAt);let t=0;return t=a.isBefore((0,p.Z)().set({year:a.year(),month:3,day:1}))?a.year()-1:a.year(),t})))),r=(0,s.Fl)((()=>t.value.filter(((e,a,t)=>t.indexOf(e)===a)).reverse())),n=e=>a.filter((a=>(0,p.Z)(a.performedAt).isBetween((0,p.Z)(`${e}-04-01`),(0,p.Z)(`${e+1}-04-01`),void 0,"[)"))).reverse(),l=e=>(0,p.Z)(e).format("YYYY/MM/DD"),i=(0,s.Fl)((()=>e.state.user.is_staff));return{yearsSet:r,kansouStaff:i,kansou:a,years:t,getItems:n,displayDate:l}}},y=t(3744);const D=(0,y.Z)(h,[["render",f],["__scopeId","data-v-244f9831"]]);var _=D}}]);
//# sourceMappingURL=kansou.3b46ec87.js.map