"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[957],{9388:function(e,a,t){t.d(a,{Gw:function(){return r},Li:function(){return l},a$:function(){return s},md:function(){return n}});var o=t(5492);const n=e=>(0,o.Z)(e).format("M/DD (dd)"),r=e=>{const a=(0,o.Z)(e).format("d");return"0"===a?"text-danger":"6"===a?"text-primary":""},l=e=>null===e?"例会教室は未登録":e,s=e=>{switch(e){case"終日使用不可":case"使用不可":return"text-danger";case null:return"text-muted";case"(20時まで音出し不可)":return"text-success";default:return""}}},7573:function(e,a,t){t.r(a),t.d(a,{default:function(){return Z}});var o=t(6252),n=t(3577),r=t(2262),l=t(5492),s=t(8042),u=t(3907),d=t(9388);const i=e=>((0,o.dD)("data-v-0d609b74"),e=e(),(0,o.Cn)(),e),m=i((()=>(0,o._)("h3",null,"例会教室",-1))),c={id:"today-room",class:"card"},p=i((()=>(0,o._)("br",null,null,-1))),v={id:"today-room-name"},g={key:0,id:"register",class:"card"},_=i((()=>(0,o._)("h4",null,"教室係用メニュー",-1))),f={id:"ical",class:"card"},w=i((()=>(0,o._)("h4",null,"Googleカレンダー連携",-1))),k=i((()=>(0,o._)("p",null,[(0,o.Uk)(" Googleカレンダーなどに例会教室データを表示できるようにしました。"),(0,o._)("br"),(0,o.Uk)("くわしくは下のリンクから ")],-1))),U={href:"/howto/meeting_room/",class:"button button-primary",target:"_blank"},h={id:"rooms",class:"card"},y=i((()=>(0,o._)("h4",null,"1カ月先までの例会教室一覧",-1))),b={key:0},D={key:1,class:"pure-table pure-table-bordered"};var S={__name:"index",setup(e){const a=(0,u.oR)(),t=(0,o.Fl)((()=>a.state.mypage.userInfo.canRegisterMeetingRoom)),i=(0,r.iH)([]);s.Z.get("/api/meeting_room/get31day/").then((e=>{i.value=e.data.rooms}));const S=(0,o.Fl)((()=>{const e=(0,l.Z)().format("YYYY-MM-DD"),a=i.value.find((a=>a.date===e));return void 0===a?{date:e,room:null}:a}));return(e,a)=>{const l=(0,o.up)("Icon"),s=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("article",null,[m,(0,o._)("div",c,[(0,o.Uk)(" 今日( "),(0,o._)("span",{class:(0,n.C_)((0,r.SU)(d.Gw)((0,r.SU)(S).date))},(0,n.zw)((0,r.SU)(d.md)((0,r.SU)(S).date)),3),(0,o.Uk)(" )の例会教室は、"),p,(0,o._)("span",v,[(0,o.Uk)(" 「 "),(0,o._)("span",{class:(0,n.C_)((0,r.SU)(d.a$)((0,r.SU)(S).room))},(0,n.zw)((0,r.SU)(d.Li)((0,r.SU)(S).room)),3),(0,o.Uk)(" 」 ")]),(0,o.Uk)(" です。 ")]),(0,r.SU)(t)?((0,o.wg)(),(0,o.iD)("div",g,[_,(0,o.Wm)(s,{to:{name:"meeting_room:register"},class:"button button-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("例会教室データの修正・登録 "),(0,o.Wm)(l,{icon:["fas","edit"]})])),_:1})])):(0,o.kq)("",!0),(0,o._)("div",f,[w,k,(0,o._)("a",U,[(0,o.Uk)("Googleカレンダー連携の方法 "),(0,o.Wm)(l,{icon:["far","calendar-plus"]})])]),(0,o._)("div",h,[y,0===i.value.length?((0,o.wg)(),(0,o.iD)("p",b,"Now Loading...")):((0,o.wg)(),(0,o.iD)("table",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.value,(e=>((0,o.wg)(),(0,o.iD)("tr",{key:e.date},[(0,o._)("td",null,[(0,o._)("span",{class:(0,n.C_)((0,r.SU)(d.Gw)(e.date))},(0,n.zw)((0,r.SU)(d.md)(e.date)),3)]),(0,o._)("td",null,[(0,o._)("span",{class:(0,n.C_)((0,r.SU)(d.a$)(e.room))},(0,n.zw)((0,r.SU)(d.Li)(e.room)),3)])])))),128))]))])])}}},C=t(3744);const x=(0,C.Z)(S,[["__scopeId","data-v-0d609b74"]]);var Z=x},5293:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});t(7658);var o=t(6252),n=t(3577),r=t(2262),l=t(9963),s=t(2201),u=t(3907),d=t(8042),i=t(5492),m=t(9388);const c=e=>((0,o.dD)("data-v-0fe12a3d"),e=e(),(0,o.Cn)(),e),p=c((()=>(0,o._)("h3",null,"例会教室登録・修正",-1))),v={class:"card"},g={autocomplete:"off",class:"pure-menu pure-form"},_={class:"pure-menu-heading"},f={class:"pure-menu-list"},w={class:"date"},k={class:"room"},U=["onUpdate:modelValue","onChange"],h=(0,o.uE)('<datalist id="rooms-presets" data-v-0fe12a3d><option value="学生集会所 3階共用室" data-v-0fe12a3d></option><option value="学生集会所 2階共用室" data-v-0fe12a3d></option><option value="4共21" data-v-0fe12a3d></option><option value="4共22" data-v-0fe12a3d></option><option value="4共24" data-v-0fe12a3d></option><option value="4共30" data-v-0fe12a3d></option><option value="4共31" data-v-0fe12a3d></option></datalist>',1),y={class:"pure-control-group custom-two-buttons-wrapper"},b={key:0,id:"api-saving-text"};var D={__name:"register",setup(e){const a=(0,u.oR)(),t=(0,s.tv)(),c=(0,o.Fl)((()=>a.state.mypage.userInfo.canRegisterMeetingRoom));c.value||(a.commit("message/addMessage",{level:"warning",message:"教室係の権限が無いようです",appname:"meeting_room/register"}),t.push({name:"meeting_room:index"}));const D=(0,i.Z)(),S=(0,r.iH)(D.year()),C=(0,r.iH)(D.month()+1),x=(0,r.iH)([]),Z=(0,r.iH)(!1),H=async(e,a)=>{Z.value=!0;const t=await d.Z.get("/api/meeting_room/get_by_month/",{params:{year:e,month:a}});x.value=t.data.rooms,Z.value=!1};H(S.value,C.value);const z=(0,r.iH)(0),G=async e=>{const t=x.value.find((a=>a.date===e)),o=new FormData;o.set("date",t.date),o.set("room_name",t.room||""),z.value++;const n=await d.Z.post("/api/meeting_room/register/",o);z.value--,n.data.room===t.room&&n.data.date===t.date||""===t.room&&null===n.data.room||(x.value=[...[...x.value].map((e=>e.date===t.date?{...n.data}:e))],a.commit("message/addMessage",{level:"warning",message:`${t.date}のデータが更新に失敗しました`,appname:"meeting_room/register"}))},M=async e=>{const a=(0,i.Z)([S.value,C.value-1]);a.add(e,"months"),S.value=a.year(),C.value=a.month()+1,x.value.length=0,await H(S.value,C.value)};return(e,a)=>{const t=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("article",null,[p,(0,o._)("div",v,[(0,o._)("form",g,[(0,o._)("h4",_,(0,n.zw)(S.value)+"年"+(0,n.zw)(C.value)+"月",1),(0,o._)("ul",f,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(x.value,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.date,class:"pure-menu-item"},[(0,o._)("div",w,[(0,o._)("span",{class:(0,n.C_)((0,r.SU)(m.Gw)(e.date))},(0,n.zw)((0,r.SU)(m.md)(e.date)),3)]),(0,o._)("div",k,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":a=>e.room=a,onChange:a=>G(e.date),placeholder:"未登録",list:"rooms-presets"},null,40,U),[[l.nr,e.room]])])])))),128)),h])]),(0,o._)("div",y,[(0,o._)("button",{onClick:a[0]||(a[0]=e=>M(-1)),class:"pure-button button-primary"}," 前の月 "),(0,o._)("button",{onClick:a[1]||(a[1]=e=>M(1)),class:"pure-button button-primary"}," 次の月 ")])]),(0,o.Wm)(t,{to:{name:"meeting_room:index"},class:"pure-button return"},{default:(0,o.w5)((()=>[(0,o.Uk)("戻る")])),_:1}),z.value>0?((0,o.wg)(),(0,o.iD)("div",b,"saving...")):(0,o.kq)("",!0)])}}},S=t(3744);const C=(0,S.Z)(D,[["__scopeId","data-v-0fe12a3d"]]);var x=C}}]);
//# sourceMappingURL=meeting_room.b23bd017.js.map