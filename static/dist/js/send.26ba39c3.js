"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[963],{5322:function(){},4920:function(e,t){t["Z"]={name:"validation-error-messages",props:{messages:{required:!0,type:Array}}}},9052:function(e,t,s){s.d(t,{s:function(){return a}});var i=s(6252),n=s(3577);const o=["textContent"];function a(e,t,s,a,l,r){return(0,i.wg)(),(0,i.iD)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.messages,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e,textContent:(0,n.zw)(e)},null,8,o)))),128))])}},3147:function(e,t,s){var i=s(9052),n=s(5044),o=(s(769),s(3744));const a=(0,o.Z)(n.Z,[["render",i.s],["__scopeId","data-v-12ab29c6"]]);t["Z"]=a},1214:function(e,t,s){s.d(t,{Z:function(){return b}});var i=s(6252),n=s(3577);const o={key:0,class:"icon-wrapper"},a=["src"],l={key:1,class:"icon-wrapper"},r={key:2,class:"icon-wrapper"},d={key:3,class:"icon-wrapper"},c={key:4,class:"icon-wrapper"},u={key:5,class:"icon-wrapper"},p={key:6,class:"icon-wrapper"},h={key:7,class:"icon-wrapper"},m={class:"preview-file-name"};function g(e,t,s,g,f,v){const y=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",{class:"preview-content-wrapper",onClick:t[0]||(t[0]=(...e)=>g.openFile&&g.openFile(...e))},["image/jpeg"===s.file.type||"image/png"===s.file.type||"image/bmp"===s.file.type||"image/gif"===s.file.type||"image/svg+xml"===s.file.type?((0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("img",{src:g.imageURL,alt:"image-preview",width:"400",height:"300"},null,8,a)])):"application/pdf"===s.file.type?((0,i.wg)(),(0,i.iD)("div",l,[(0,i.Wm)(y,{icon:"file-pdf"})])):s.file.type.startsWith("audio/")?((0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(y,{icon:"file-audio"})])):s.file.type.startsWith("video/")?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(y,{icon:"file-video"})])):"application/msword"===s.file.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===s.file.type?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(y,{icon:"file-word"})])):"application/vnd.ms-powerpoint"===s.file.type||"vnd.openxmlformats-officedocument.presentationml.presentation"===s.file.type?((0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(y,{icon:"file-powerpoint"})])):"application/vnd.ms-excel"===s.file.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===s.file.type?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.Wm)(y,{icon:"file-excel"})])):((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(y,{icon:"file-alt"})])),(0,i._)("div",m,(0,n.zw)(s.file.name),1)])}var f=s(2262),v={props:{file:{required:!0,type:File}},setup(e){const t=(0,f.iH)(""),s=(0,f.iH)(""),n=(0,i.Fl)((()=>e.file)),o=(0,i.Fl)((()=>n.value.type.startsWith("image/"))),a=()=>{s.value&&window.open(s.value,"filePreview")};return(0,i.bv)((()=>{const e=new FileReader;o.value&&(e.onload=e=>{t.value=e.target.result}),e.readAsDataURL(n.value),s.value=URL.createObjectURL(n.value)})),(0,i.Ah)((()=>{URL.revokeObjectURL(n.value)})),{openFile:a,isImage:o,imageURL:t}}},y=s(3744);const w=(0,y.Z)(v,[["render",g],["__scopeId","data-v-ffbb5a56"]]);var b=w},2533:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var i=s(6252),n=s(3577);const o=e=>((0,i.dD)("data-v-e1b0d6c2"),e=e(),(0,i.Cn)(),e),a=o((()=>(0,i._)("h3",null,"メーリス送信確認",-1))),l={class:"card"},r={class:"pure-g"},d=o((()=>(0,i._)("div",{class:"pure-u-1 pure-u-sm-1-5 pure-u-md-5-24"},"件名",-1))),c={class:"pure-u-1 pure-u-sm-4-5 pure-u-md-19-24"},u={class:"pure-g"},p=o((()=>(0,i._)("div",{class:"pure-u-1 pure-u-sm-1-5 pure-u-md-5-24"},"From",-1))),h={class:"pure-u-1 pure-u-sm-4-5 pure-u-md-19-24"},m={class:"pure-g"},g=o((()=>(0,i._)("div",{class:"pure-u-1 pure-u-sm-1-5 pure-u-md-5-24"},"To",-1))),f={class:"pure-u-1 pure-u-sm-4-5 pure-u-md-19-24"},v={class:"pure-g"},y=o((()=>(0,i._)("div",{class:"pure-u-1 pure-u-sm-1-5 pure-u-md-5-24"},"本文",-1))),w={class:"pure-u-1 pure-u-sm-4-5 pure-u-md-19-24 message-content"},b={class:"pure-g"},_=o((()=>(0,i._)("div",{class:"pure-u-1 pure-u-sm-1-5 pure-u-md-5-24"},"添付ファイル",-1))),O={class:"pure-u-1 pure-u-sm-4-5 pure-u-md-19-24"},k={key:0,class:"attachment-wraper"},D={key:1},F={class:"custom-two-buttons-wrapper"};function S(e,t,s,o,S,V){const C=(0,i.up)("AttachmentPreview"),$=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("article",null,[a,(0,i._)("section",l,[(0,i._)("div",r,[d,(0,i._)("div",c,(0,n.zw)(o.title),1)]),(0,i._)("div",u,[p,(0,i._)("div",h,(0,n.zw)(o.writer.name)+" ("+(0,n.zw)(o.writer.year)+") ",1)]),(0,i._)("div",m,[g,(0,i._)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.tos,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.label,class:"to-address"},(0,n.zw)(e.label),1)))),128))])]),(0,i._)("div",v,[y,(0,i._)("div",w,(0,n.zw)(o.content),1)]),(0,i._)("div",b,[_,(0,i._)("div",O,[o.attachments.length?((0,i.wg)(),(0,i.iD)("div",k,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.attachments,(e=>((0,i.wg)(),(0,i.j4)(C,{key:e.name+e.size,file:e},null,8,["file"])))),128)),(0,i._)("div",null,(0,n.zw)(o.attachments.length)+"件添付",1)])):((0,i.wg)(),(0,i.iD)("div",D,"添付ファイルはありません"))])])]),(0,i._)("div",F,[(0,i.Wm)($,{to:{name:"mail:send"},class:"pure-button return"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 戻る ")])),_:1}),(0,i.Wm)($,{to:{name:"mail:send-finish"},class:"pure-button button-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 送信する ")])),_:1})])])}s(7658);var V=s(3907),C=s(2201),$=s(1214),L={components:{AttachmentPreview:$.Z},setup(){const e=(0,V.oR)(),t=(0,C.tv)();e.getters["send/isValidAndDirty"]||(e.commit("message/addMessage",{level:"warning",message:"フォームに正しく入力してください。",appname:"mail/send"}),t.push("/mail/send"));const s=(0,i.Fl)((()=>e.state.send.title.value)),n=(0,i.Fl)((()=>e.state.send.tos.value)),o=(0,i.Fl)((()=>e.state.send.content.value)),a=(0,i.Fl)((()=>e.state.send.writer.value)),l=(0,i.Fl)((()=>e.state.send.attachments.value)),r=e=>{e.preventDefault(),t.push("/mail/send")},d=e=>{e.preventDefault()};return{title:s,content:o,writer:a,attachments:l,tos:n,backToInput:r,send:d}}},A=s(3744);const I=(0,A.Z)(L,[["render",S],["__scopeId","data-v-e1b0d6c2"]]);var x=I},7981:function(e,t,s){s.r(t),s.d(t,{default:function(){return F}});s(7658);var i=s(6252),n=s(3577),o=s(2262),a=s.p+"static/dist/img/loading-puff-green.e0843bbd.svg",l=s(3907),r=s(2201);const d=e=>((0,i.dD)("data-v-1e2f83af"),e=e(),(0,i.Cn)(),e),c={key:0,class:"card"},u=d((()=>(0,i._)("div",{class:"icon"},[(0,i._)("img",{src:a,width:"50",height:"50",alt:"Senging spinner"})],-1))),p=d((()=>(0,i._)("p",null,[(0,i.Uk)(" 送信中です。しばらくお待ちください。"),(0,i._)("br"),(0,i.Uk)(" 送信完了まで、10秒ほどかかる場合があります。 ")],-1))),h=[u,p],m={key:1,class:"card"},g={class:"icon text-success"},f=d((()=>(0,i._)("br",null,null,-1))),v={class:"links right"},y={key:2,class:"card"},w={class:"icon text-error"},b=d((()=>(0,i._)("p",null,[(0,i.Uk)(" エラーが発生し、送信できませんでした。"),(0,i._)("br"),(0,i.Uk)(" 送信内容を確認するか、開発者までご連絡ください。 ")],-1))),_={class:"links left"};var O={__name:"send-finish",setup(e){const t=(0,l.oR)(),s=(0,r.tv)(),a=(0,o.iH)("sending"),d=(0,o.iH)(null);t.getters["send/isValidAndDirty"]?t.dispatch("send/send").then((e=>{console.log(e),d.value=e.data.total_send_num,a.value="done",t.commit("send/reset")})).catch((e=>{console.log(e),a.value="error"})):s.push({name:"mail:send"});const u=(0,i.Fl)((()=>{const e={sending:"送信中",done:"完了",error:"エラー"};return`メーリス送信 - ${e[a.value]}`}));return(e,t)=>{const s=(0,i.up)("Icon"),l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("article",null,[(0,i._)("h3",null,(0,n.zw)((0,o.SU)(u)),1),"sending"===a.value?((0,i.wg)(),(0,i.iD)("div",c,h)):"done"===a.value?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",g,[(0,i.Wm)(s,{icon:["far","check-circle"]})]),(0,i._)("p",null,[(0,i.Uk)(" 通信が完了しました！"),f,(0,i.Uk)(" メーリスを"+(0,n.zw)(d.value)+"人に送信しました。 ",1)]),(0,i._)("div",v,[(0,i.Wm)(l,{to:{name:"mail:index"},class:"pure-button button-primary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" メーリス一覧へ ")])),_:1})])])):"error"===a.value?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("div",w,[(0,i.Wm)(s,{icon:["fas","exclamation-circle"]})]),b,(0,i._)("div",_,[(0,i.Wm)(l,{to:{name:"mail:send"},class:"pure-button return"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 送信画面へ戻る ")])),_:1})])])):(0,i.kq)("",!0)])}}},k=s(3744);const D=(0,k.Z)(O,[["__scopeId","data-v-1e2f83af"]]);var F=D},1332:function(e,t,s){s.r(t),s.d(t,{default:function(){return et}});var i=s(6252);const n=e=>((0,i.dD)("data-v-ccf3e0b6"),e=e(),(0,i.Cn)(),e),o=n((()=>(0,i._)("h3",null,"メーリス送信・入力",-1))),a={class:"pure-form pure-form-stacked"},l={class:"pure-form pure-form-stacked"},r=["disabled"];function d(e,t,s,n,d,c){const u=(0,i.up)("send-input-title"),p=(0,i.up)("send-input-to"),h=(0,i.up)("send-input-from"),m=(0,i.up)("send-input-content"),g=(0,i.up)("send-input-attachments");return(0,i.wg)(),(0,i.iD)("article",null,[o,(0,i._)("form",null,[(0,i._)("div",a,[(0,i.Wm)(u)]),(0,i.Wm)(p),(0,i._)("div",l,[(0,i.Wm)(h),(0,i.Wm)(m),(0,i.Wm)(g),(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>n.onClick&&n.onClick(...e)),class:"pure-button button-primary",disabled:!n.isValid}," 確認画面へ ",8,r)])])])}s(7658);var c=s(3907),u=s(2201),p=s(9963);const h={class:"form-one-row"},m=(0,i._)("label",{for:"id_title"},"件名: ",-1);function g(e,t,s,n,o,a){const l=(0,i.up)("ValidationErrorMessages");return(0,i.wg)(),(0,i.iD)("div",h,[m,(0,i.wy)((0,i._)("input",{type:"text",name:"title","onUpdate:modelValue":t[0]||(t[0]=e=>n.title=e),placeholder:"件名を入力",class:"pure-input-1",required:"",id:"id_title"},null,512),[[p.nr,n.title]]),n.error_messages.length>0&&n.is_dirty?((0,i.wg)(),(0,i.j4)(l,{key:0,messages:n.error_messages},null,8,["messages"])):(0,i.kq)("",!0)])}var f=s(3147),v={components:{ValidationErrorMessages:f.Z},setup(){const e=(0,c.oR)(),t=(0,i.Fl)({get:()=>e.state.send.title["value"],set:t=>e.commit("send/setTitle",t)}),s=(0,i.Fl)((()=>e.state.send.title["is_dirty"])),n=(0,i.Fl)((()=>e.state.send.title["error_messages"]));return{title:t,is_dirty:s,error_messages:n}}},y=s(3744);const w=(0,y.Z)(v,[["render",g]]);var b=w;const _={class:"form-one-row"},O=(0,i._)("label",{for:"id_content"},"本文: ",-1);function k(e,t,s,n,o,a){const l=(0,i.up)("ValidationErrorMessages");return(0,i.wg)(),(0,i.iD)("div",_,[O,(0,i.wy)((0,i._)("textarea",{name:"content","onUpdate:modelValue":t[0]||(t[0]=e=>n.content=e),cols:"40",rows:"10",placeholder:"本文を入力",class:"pure-input-1",id:"id_content",required:""},"\r\n    ",512),[[p.nr,n.content]]),n.error_messages.length>0&&n.is_dirty?((0,i.wg)(),(0,i.j4)(l,{key:0,messages:n.error_messages},null,8,["messages"])):(0,i.kq)("",!0)])}var D={components:{ValidationErrorMessages:f.Z},setup(){const e=(0,c.oR)(),t=(0,i.Fl)({get:()=>e.state.send.content["value"],set:t=>e.commit("send/setContent",t)}),s=(0,i.Fl)((()=>e.state.send.content["is_dirty"])),n=(0,i.Fl)((()=>e.state.send.content["error_messages"]));return{content:t,is_dirty:s,error_messages:n}}};const F=(0,y.Z)(D,[["render",k]]);var S=F;const V={class:"form-one-row"},C=(0,i._)("div",{class:"v-select-label"},"To:",-1),$={class:"v-select-wraper"};function L(e,t,s,n,o,a){const l=(0,i.up)("VSelect"),r=(0,i.up)("ValidationErrorMessages");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",V,[C,(0,i._)("div",$,[(0,i.Wm)(l,{modelValue:n.tos,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tos=e),options:n.years,label:"label",multiple:""},null,8,["modelValue","options"])])]),n.error_messages.length>0&&n.is_dirty?((0,i.wg)(),(0,i.j4)(r,{key:0,messages:n.error_messages},null,8,["messages"])):(0,i.kq)("",!0)],64)}var A=s(2262),I=s(8042),x=s(3577),M=Object.defineProperty,W=Object.defineProperties,P=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,U=(e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,j=(e,t)=>{for(var s in t||(t={}))B.call(t,s)&&U(e,s,t[s]);if(T)for(var s of T(t))E.call(t,s)&&U(e,s,t[s]);return e},z=(e,t)=>W(e,P(t));const Z={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(e){this.autoscroll&&e&&this.$nextTick((()=>this.maybeAdjustScroll()))}},methods:{maybeAdjustScroll(){var e;const t=(null==(e=this.$refs.dropdownMenu)?void 0:e.children[this.typeAheadPointer])||!1;if(t){const e=this.getDropdownViewport(),{top:s,bottom:i,height:n}=t.getBoundingClientRect();if(s<e.top)return this.$refs.dropdownMenu.scrollTop=t.offsetTop;if(i>e.bottom)return this.$refs.dropdownMenu.scrollTop=t.offsetTop-(e.height-n)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},R={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open(e){e&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown(){for(let e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect(){const e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected(){this.typeAheadPointer=0!==this.selectedValue.length?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},H={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(e){this.mutableLoading=e}},methods:{toggleLoading(e=null){return this.mutableLoading=null==e?!this.mutableLoading:e}}},K=(e,t)=>{const s=e.__vccOpts||e;for(const[i,n]of t)s[i]=n;return s},q={},Y={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},N=(0,i._)("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),J=[N];function Q(e,t){return(0,i.wg)(),(0,i.iD)("svg",Y,J)}const G=K(q,[["render",Q]]),X={},ee={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},te=(0,i._)("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),se=[te];function ie(e,t){return(0,i.wg)(),(0,i.iD)("svg",ee,se)}const ne=K(X,[["render",ie]]),oe={Deselect:G,OpenIndicator:ne},ae={mounted(e,{instance:t}){if(t.appendToBody){const{height:s,top:i,left:n,width:o}=t.$refs.toggle.getBoundingClientRect();let a=window.scrollX||window.pageXOffset,l=window.scrollY||window.pageYOffset;e.unbindPosition=t.calculatePosition(e,t,{width:o+"px",left:a+n+"px",top:l+i+s+"px"}),document.body.appendChild(e)}},unmounted(e,{instance:t}){t.appendToBody&&(e.unbindPosition&&"function"==typeof e.unbindPosition&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}};function le(e){const t={};return Object.keys(e).sort().forEach((s=>{t[s]=e[s]})),JSON.stringify(t)}let re=0;function de(){return++re}const ce={components:j({},oe),directives:{appendToBody:ae},mixins:[Z,R,H],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0},getOptionLabel:{type:Function,default(e){return"object"==typeof e?e.hasOwnProperty(this.label)?e[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(e)}.\nhttps://vue-select.org/api/props.html#getoptionlabel`):e}},getOptionKey:{type:Function,default(e){if("object"!=typeof e)return e;try{return e.hasOwnProperty("id")?e.id:le(e)}catch(t){return console.warn("[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.\nhttps://vue-select.org/api/props.html#getoptionkey",e,t)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(e,t,s){return(t||"").toLocaleLowerCase().indexOf(s.toLocaleLowerCase())>-1}},filter:{type:Function,default(e,t){return e.filter((e=>{let s=this.getOptionLabel(e);return"number"==typeof s&&(s=s.toString()),this.filterBy(e,s,t)}))}},createOption:{type:Function,default(e){return"object"==typeof this.optionList[0]?{[this.label]:e}:e}},resetOnOptionsChange:{default:!1,validator:e=>["function","boolean"].includes(typeof e)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:e,multiple:t}){return e&&!t}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(e,t)=>e},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,t,{width:s,top:i,left:n}){e.style.top=i,e.style.left=n,e.style.width=s}},dropdownShouldOpen:{type:Function,default({noDrop:e,open:t,mutableLoading:s}){return!e&&(t&&!s)}},uid:{type:[String,Number],default:()=>de()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return"undefined"==typeof this.modelValue||this.isReducingValues},selectedValue(){let e=this.modelValue;return this.isTrackingValues&&(e=this.$data._value),null!=e&&""!==e?[].concat(e):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const e={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:j({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:e=>this.search=e.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:e,listFooter:e,header:z(j({},e),{deselect:this.deselect}),footer:z(j({},e),{deselect:this.deselect})}},childComponents(){return j(j({},oe),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;const t=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){const e=this.createOption(this.search);this.optionExists(e)||t.unshift(e)}return t},isValueEmpty(){return 0===this.selectedValue.length},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(e,t){const s=()=>"function"==typeof this.resetOnOptionsChange?this.resetOnOptionsChange(e,t,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&s()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple(){this.clearSelection()},open(e){this.$emit(e?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(e){Array.isArray(e)?this.$data._value=e.map((e=>this.findOptionFromReducedValue(e))):this.$data._value=this.findOptionFromReducedValue(e)},select(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&(this.$emit("option:created",e),this.pushTag(e)),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect(e){this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter((t=>!this.optionComparator(t,e)))),this.$emit("option:deselected",e)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(e){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(e){"undefined"==typeof this.modelValue&&(this.$data._value=e),null!==e&&(e=Array.isArray(e)?e.map((e=>this.reduce(e))):this.reduce(e)),this.$emit("update:modelValue",e)},toggleDropdown(e){const t=e.target!==this.searchEl;t&&e.preventDefault();const s=[...this.deselectButtons||[],this.$refs.clearButton];void 0===this.searchEl||s.filter(Boolean).some((t=>t.contains(e.target)||t===e.target))?e.preventDefault():this.open&&t?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(e){return this.selectedValue.some((t=>this.optionComparator(t,e)))},isOptionDeselectable(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator(e,t){return this.getOptionKey(e)===this.getOptionKey(t)},findOptionFromReducedValue(e){const t=t=>JSON.stringify(this.reduce(t))===JSON.stringify(e),s=[...this.options,...this.pushedTags].filter(t);return 1===s.length?s[0]:s.find((e=>this.optionComparator(e,this.$data._value)))||e},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let e=null;this.multiple&&(e=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(e)}},optionExists(e){return this.optionList.some((t=>this.optionComparator(t,e)))},normalizeOptionForSlot(e){return"object"==typeof e?e:{[this.label]:e}},pushTag(e){this.pushedTags.push(e)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(!this.mousedown||this.searching){const{clearSearchOnSelect:e,multiple:t}=this;return this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:t})&&(this.search=""),void this.closeSearchOptions()}this.mousedown=!1,0!==this.search.length||0!==this.options.length||this.closeSearchOptions()},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(e){const t=e=>(e.preventDefault(),!this.isComposing&&this.typeAheadSelect()),s={8:e=>this.maybeDeleteValue(),9:e=>this.onTab(),27:e=>this.onEscape(),38:e=>(e.preventDefault(),this.typeAheadUp()),40:e=>(e.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach((e=>s[e]=t));const i=this.mapKeydown(s,this);if("function"==typeof i[e.keyCode])return i[e.keyCode](e)}}},ue=["dir"],pe=["id","aria-expanded","aria-owns"],he={ref:"selectedOptions",class:"vs__selected-options"},me=["disabled","title","aria-label","onClick"],ge={ref:"actions",class:"vs__actions"},fe=["disabled"],ve={class:"vs__spinner"},ye=["id"],we=["id","aria-selected","onMouseover","onClick"],be={key:0,class:"vs__no-options"},_e=(0,i.Uk)(" Sorry, no matching options. "),Oe=["id"];function ke(e,t,s,n,o,a){const l=(0,i.Q2)("append-to-body");return(0,i.wg)(),(0,i.iD)("div",{dir:s.dir,class:(0,x.C_)(["v-select",a.stateClasses])},[(0,i.WI)(e.$slots,"header",(0,x.vs)((0,i.F4)(a.scope.header))),(0,i._)("div",{id:`vs${s.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":a.dropdownOpen.toString(),"aria-owns":`vs${s.uid}__listbox`,"aria-label":"Search for option",onMousedown:t[1]||(t[1]=e=>a.toggleDropdown(e))},[(0,i._)("div",he,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.selectedValue,((t,n)=>(0,i.WI)(e.$slots,"selected-option-container",{option:a.normalizeOptionForSlot(t),deselect:a.deselect,multiple:s.multiple,disabled:s.disabled},(()=>[((0,i.wg)(),(0,i.iD)("span",{key:s.getOptionKey(t),class:"vs__selected"},[(0,i.WI)(e.$slots,"selected-option",(0,x.vs)((0,i.F4)(a.normalizeOptionForSlot(t))),(()=>[(0,i.Uk)((0,x.zw)(s.getOptionLabel(t)),1)])),s.multiple?((0,i.wg)(),(0,i.iD)("button",{key:0,ref_for:!0,ref:e=>o.deselectButtons[n]=e,disabled:s.disabled,type:"button",class:"vs__deselect",title:`Deselect ${s.getOptionLabel(t)}`,"aria-label":`Deselect ${s.getOptionLabel(t)}`,onClick:e=>a.deselect(t)},[((0,i.wg)(),(0,i.j4)((0,i.LL)(a.childComponents.Deselect)))],8,me)):(0,i.kq)("",!0)]))])))),256)),(0,i.WI)(e.$slots,"search",(0,x.vs)((0,i.F4)(a.scope.search)),(()=>[(0,i._)("input",(0,i.dG)({class:"vs__search"},a.scope.search.attributes,(0,i.mx)(a.scope.search.events)),null,16)]))],512),(0,i._)("div",ge,[(0,i.wy)((0,i._)("button",{ref:"clearButton",disabled:s.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:t[0]||(t[0]=(...e)=>a.clearSelection&&a.clearSelection(...e))},[((0,i.wg)(),(0,i.j4)((0,i.LL)(a.childComponents.Deselect)))],8,fe),[[p.F8,a.showClearButton]]),(0,i.WI)(e.$slots,"open-indicator",(0,x.vs)((0,i.F4)(a.scope.openIndicator)),(()=>[s.noDrop?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.LL)(a.childComponents.OpenIndicator),(0,x.vs)((0,i.dG)({key:0},a.scope.openIndicator.attributes)),null,16))])),(0,i.WI)(e.$slots,"spinner",(0,x.vs)((0,i.F4)(a.scope.spinner)),(()=>[(0,i.wy)((0,i._)("div",ve,"Loading...",512),[[p.F8,e.mutableLoading]])]))],512)],40,pe),(0,i.Wm)(p.uT,{name:s.transition},{default:(0,i.w5)((()=>[a.dropdownOpen?(0,i.wy)(((0,i.wg)(),(0,i.iD)("ul",{id:`vs${s.uid}__listbox`,ref:"dropdownMenu",key:`vs${s.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:t[2]||(t[2]=(0,p.iM)(((...e)=>a.onMousedown&&a.onMousedown(...e)),["prevent"])),onMouseup:t[3]||(t[3]=(...e)=>a.onMouseUp&&a.onMouseUp(...e))},[(0,i.WI)(e.$slots,"list-header",(0,x.vs)((0,i.F4)(a.scope.listHeader))),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.filteredOptions,((t,n)=>((0,i.wg)(),(0,i.iD)("li",{id:`vs${s.uid}__option-${n}`,key:s.getOptionKey(t),role:"option",class:(0,x.C_)(["vs__dropdown-option",{"vs__dropdown-option--deselect":a.isOptionDeselectable(t)&&n===e.typeAheadPointer,"vs__dropdown-option--selected":a.isOptionSelected(t),"vs__dropdown-option--highlight":n===e.typeAheadPointer,"vs__dropdown-option--disabled":!s.selectable(t)}]),"aria-selected":n===e.typeAheadPointer||null,onMouseover:i=>s.selectable(t)?e.typeAheadPointer=n:null,onClick:(0,p.iM)((e=>s.selectable(t)?a.select(t):null),["prevent","stop"])},[(0,i.WI)(e.$slots,"option",(0,x.vs)((0,i.F4)(a.normalizeOptionForSlot(t))),(()=>[(0,i.Uk)((0,x.zw)(s.getOptionLabel(t)),1)]))],42,we)))),128)),0===a.filteredOptions.length?((0,i.wg)(),(0,i.iD)("li",be,[(0,i.WI)(e.$slots,"no-options",(0,x.vs)((0,i.F4)(a.scope.noOptions)),(()=>[_e]))])):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"list-footer",(0,x.vs)((0,i.F4)(a.scope.listFooter)))],40,ye)),[[l]]):((0,i.wg)(),(0,i.iD)("ul",{key:1,id:`vs${s.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Oe))])),_:3},8,["name"]),(0,i.WI)(e.$slots,"footer",(0,x.vs)((0,i.F4)(a.scope.footer)))],10,ue)}const De=K(ce,[["render",ke]]);var Fe={components:{ValidationErrorMessages:f.Z,VSelect:De},setup(){const e=(0,c.oR)(),t=(0,i.Fl)({get:()=>e.state.send.tos["value"],set:t=>e.commit("send/setTos",t)}),s=(0,i.Fl)((()=>e.state.send.tos["is_dirty"])),n=(0,i.Fl)((()=>e.state.send.tos["error_messages"])),o=e=>`${String(e)} ${String(e-1994)}期`,a=e.state.user.year,l=(0,A.iH)([{year:0,label:"全回メーリス"},{year:a,label:o(a)}]);return(0,i.bv)((()=>{I.Z.get("/api/board/send/togroups/").then((e=>{l.value.length=0,e.data.togropus.forEach((e=>{l.value.push(e)}))}))})),{tos:t,is_dirty:s,error_messages:n,years:l}}};const Se=(0,y.Z)(Fe,[["render",L]]);var Ve=Se;const Ce=e=>((0,i.dD)("data-v-77fde8b7"),e=e(),(0,i.Cn)(),e),$e={class:"form-one-row"},Le={class:"pure-g"},Ae=Ce((()=>(0,i._)("div",{class:"pure-u-1"},[(0,i._)("label",{for:"year_choice"},"From:")],-1))),Ie={class:"pure-u-1-3"},xe=["value"],Me={class:"pure-u-2-3"},We=["value"];function Pe(e,t,s,n,o,a){const l=(0,i.up)("ValidationErrorMessages");return(0,i.wg)(),(0,i.iD)("div",$e,[(0,i._)("div",Le,[Ae,(0,i._)("div",Ie,[(0,i.wy)((0,i._)("select",{name:"year_choice","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedYear=e),id:"year_choice",class:"pure-u-24-24"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.years,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e},(0,x.zw)(e),9,xe)))),128))],512),[[p.bM,n.selectedYear]])]),(0,i._)("div",Me,[(0,i.wy)((0,i._)("select",{name:"member_choice","onUpdate:modelValue":t[1]||(t[1]=e=>n.writer=e),class:"pure-u-24-24",id:"member_choice"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.memberChoices,(e=>((0,i.wg)(),(0,i.iD)("option",{value:e,key:e.id},(0,x.zw)(e.name),9,We)))),128))],512),[[p.bM,n.writer]])])]),n.error_messages.length>0&&n.is_dirty?((0,i.wg)(),(0,i.j4)(l,{key:0,messages:n.error_messages},null,8,["messages"])):(0,i.kq)("",!0)])}var Te={components:{ValidationErrorMessages:f.Z},setup(){const e=(0,c.oR)(),t=(0,i.Fl)({get:()=>e.state.send.writer.value,set:t=>e.commit("send/setWriter",t)}),s=(0,i.Fl)((()=>e.state.send.writer.is_dirty)),n=(0,i.Fl)((()=>e.state.send.writer.error_messages)),o=(0,A.iH)(e.state.mypage.userInfo.year),a=(0,A.iH)([e.state.mypage.userInfo.year]),l=(0,A.iH)([{year:e.state.mypage.userInfo.year,list:[{id:e.state.mypage.userInfo.id,name:e.state.mypage.userInfo.shortname,year:e.state.mypage.userInfo.year}]}]);null===t.value&&e.commit("send/setWriter",{id:e.state.mypage.userInfo.id,name:e.state.mypage.userInfo.shortname,year:e.state.mypage.userInfo.year}),(0,i.bv)((()=>{I.Z.get("/api/board/send/froms/").then((e=>{l.value=e.data.members,a.value=e.data.years}))})),(0,i.YP)(o,(s=>{t.value.year!==s&&e.commit("send/setWriter",null)}));const r=(0,i.Fl)((()=>l.value.find((e=>e.year===o.value)).list));return{writer:t,is_dirty:s,error_messages:n,selectedYear:o,years:a,memberChoices:r}}};const Be=(0,y.Z)(Te,[["render",Pe],["__scopeId","data-v-77fde8b7"]]);var Ee=Be;const Ue={class:"attachent-wrapper form-one-row"},je={key:0},ze={key:1},Ze={key:0},Re={class:"attachment-preview"},He=["onClick"],Ke={key:1};function qe(e,t,s,n,o,a){const l=(0,i.up)("attachment-preview"),r=(0,i.up)("ValidationErrorMessages");return(0,i.wg)(),(0,i.iD)("div",Ue,[(0,i._)("label",{for:"attachment-input",class:(0,x.C_)({"attachment-opened":n.opened}),onDragenter:t[1]||(t[1]=(...e)=>n.dragEnter&&n.dragEnter(...e)),onDragleave:t[2]||(t[2]=(...e)=>n.dragLeave&&n.dragLeave(...e)),onDragover:t[3]||(t[3]=(0,p.iM)((()=>{}),["prevent"])),onDrop:t[4]||(t[4]=(0,p.iM)(((...e)=>n.dropFile&&n.dropFile(...e)),["prevent"]))},[n.opened?((0,i.wg)(),(0,i.iD)("span",je,"ここに添付するファイルをドロップ")):((0,i.wg)(),(0,i.iD)("span",ze,"添付ファイルを選択、もしくはここにドラッグ＆ドロップ")),(0,i._)("input",{type:"file",multiple:"",id:"attachment-input",onChange:t[0]||(t[0]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,32)],34),n.attachments.length?((0,i.wg)(),(0,i.iD)("div",Ze," クリックすると新しいタブでファイルを確認できます ")):(0,i.kq)("",!0),(0,i._)("div",Re,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.attachments,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"attachment-preview-wrapper",key:e.name+e.size},[(0,i.Wm)(l,{file:e},null,8,["file"]),(0,i._)("div",{class:"file-cansel",onClick:t=>n.cansel(e)},"×",8,He)])))),128))]),n.attachments.length?((0,i.wg)(),(0,i.iD)("div",Ke,(0,x.zw)(n.attachments.length)+"件が選択されています ",1)):(0,i.kq)("",!0),n.error_messages.length&&n.is_dirty?((0,i.wg)(),(0,i.j4)(r,{key:2,messages:n.error_messages},null,8,["messages"])):(0,i.kq)("",!0)])}var Ye=s(1214),Ne={components:{ValidationErrorMessages:f.Z,attachmentPreview:Ye.Z},setup(){const e=(0,c.oR)(),t=(0,i.Fl)({get:()=>e.state.send.attachments["value"],set:t=>e.commit("send/setAttachments",t)}),s=(0,i.Fl)((()=>e.state.send.attachments["is_dirty"])),n=(0,i.Fl)((()=>e.state.send.attachments["error_messages"])),o=(0,A.iH)(!1),a=(0,A.iH)([]),l=e=>{const t=e.target.files;for(let s=0;s<t.length;s++)a.value.push(t[s]);h()},r=()=>{o.value=!0},d=()=>{o.value=!1},u=e=>{o.value=!1;const t=e.dataTransfer.files;for(let s=0;s<t.length;s++)a.value.push(t[s]);h()},p=e=>{a.value=a.value.filter((t=>!(t.size===e.size&&t.name===e.name))),h()},h=()=>{const t=a.value.reduce(((t,s)=>t.some((e=>e.size===s.size&&e.name===s.name))?(e.commit("message/addMessage",{level:"warning",message:`重複したファイルが検出されました。${s.name}は追加されていません。`,appname:"mail/send"}),[...t]):[...t,s]),[]);a.value.length=0,t.forEach((e=>{a.value.push(e)})),e.commit("send/setAttachments",t)};return(0,i.wF)((()=>{t.value.forEach((e=>{a.value.push(e)}))})),{attachments:t,is_dirty:s,error_messages:n,opened:o,internalAttachments:a,onFileChange:l,dragEnter:r,dragLeave:d,dropFile:u,cansel:p}}};const Je=(0,y.Z)(Ne,[["render",qe],["__scopeId","data-v-fadbed36"]]);var Qe=Je,Ge={components:{sendInputTitle:b,sendInputContent:S,sendInputTo:Ve,sendInputFrom:Ee,sendInputAttachments:Qe},setup(){const e=(0,c.oR)(),t=(0,i.Fl)((()=>e.getters["send/isValidAndDirty"])),s=(0,u.tv)(),n=i=>{i.preventDefault(),e.commit("send/validateAll"),t.value?s.push("/mail/send/confirm"):e.commit("message/addMessage",{level:"warning",message:"不正なフィールドがあります。",appname:"mail/send"})};return{isValid:t,onClick:n}}};const Xe=(0,y.Z)(Ge,[["render",d],["__scopeId","data-v-ccf3e0b6"]]);var et=Xe},769:function(e,t,s){s(5322)},5044:function(e,t,s){s.d(t,{Z:function(){return i.Z}});var i=s(4920)}}]);
//# sourceMappingURL=send.26ba39c3.js.map