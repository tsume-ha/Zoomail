"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[886],{6773:function(e,t,s){s.d(t,{Z:function(){return b}});var a=s(6252);const r={key:0},n={key:1},i={key:2},o=(0,a.Uk)(" please retry. "),d={key:3},l={key:4};function u(e,t,s,u,c,m){return u.status.loading?((0,a.wg)(),(0,a.iD)("div",r," loading... ")):u.status.notFound?((0,a.wg)(),(0,a.iD)("div",n," 404 ")):u.status.loading||u.status.loaded?u.status.loaded?((0,a.wg)(),(0,a.iD)("div",d,[(0,a.WI)(e.$slots,"header"),(0,a.WI)(e.$slots,"default")])):((0,a.wg)(),(0,a.iD)("div",l)):((0,a.wg)(),(0,a.iD)("div",i,[o,(0,a._)("button",{onClick:t[0]||(t[0]=(...e)=>u.reload&&u.reload(...e))},"再読み込み")]))}var c=s(2262),m=s(2119),p=s(5501),k=s(8042),_={props:{id:{type:Number,required:!0},dataList:{type:Array,required:!0},oneContentAPIPath:{type:String,required:!0}},setup(e,t){const s=(0,m.yj)(),a=(0,p.oR)(),r=Number(s.params.id),n=(0,c.qj)({loading:!0,loaded:!1,notFound:!1}),i=()=>{k.Z.get(e.oneContentAPIPath).then((e=>{n.loaded=!0;const s={...e.data};t.emit("setContent",s)})).catch((e=>{"Network Error"==e.message&&void 0===e.response?console.log("通信エラー"):500===e.response.status?(n.loaded=!0,console.log("500")):403===e.response.status||404===e.response.status?(n.loaded=!0,n.notFound=!0):(console.log(e.message),a.commit("message/addMessage",{level:"error",message:`予想外のエラーが帰ってきました。: ${e.message}`,appname:"abscractComtent"}))})).finally((()=>{n.loading=!1}))};if(e.dataList.some((e=>Number(e.id)===r))){const s={...e.dataList.find((e=>Number(e.id)===r))};t.emit("setContent",s),n.loading=!1,n.loaded=!0}else i();const o=()=>i();return{status:n,reload:o}}},g=s(3744);const y=(0,g.Z)(_,[["render",u]]);var b=y},4098:function(e,t,s){s.d(t,{Z:function(){return m}});var a=s(6252),r=s(3577);const n={class:"row content-header"};function i(e,t,s,i,o,d){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("header",n,[(0,a.Wm)(l,{to:i.to,class:"back-arrow"},null,8,["to"]),(0,a._)("h3",null,(0,r.zw)(s.text),1)])}var o=s(5501),d=s(2262),l={props:{path:{type:[String,Object],required:!1,default:()=>"../"},text:{type:String,required:!0}},setup(e){const t=(0,o.oR)(),s=(0,d.Fl)((()=>{if(t.state.lastPath){const{name:e,params:s,query:a}=t.state.lastPath;return{name:e,params:s,query:a}}return e.path}));return{to:s}}},u=s(3744);const c=(0,u.Z)(l,[["render",i],["__scopeId","data-v-9d2f4924"]]);var m=c},4598:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var a=s(6252);const r=(0,a._)("div",null,"content example",-1);function n(e,t,s,n,i,o){const d=(0,a.up)("abstract-content-header"),l=(0,a.up)("abstract-content");return(0,a.wg)(),(0,a.j4)(l,{id:s.id,dataList:n.messages,oneContentAPIPath:n.apiPath,onSetContent:n.setMessage},{header:(0,a.w5)((()=>[(0,a.Wm)(d,{path:{name:"mail:index"},text:n.message.title},null,8,["text"])])),default:(0,a.w5)((()=>[r])),_:1},8,["id","dataList","oneContentAPIPath","onSetContent"])}var i=s(6773),o=s(4098),d=s(2262),l=s(5501),u={components:{AbstractContent:i.Z,AbstractContentHeader:o.Z},props:{id:{required:!0,type:Number}},setup(e){const t=(0,l.oR)(),s=(0,d.Fl)((()=>t.state.read.messages)),a=(0,d.iH)({}),r=e=>{a.value=e},n=(0,d.Fl)((()=>`/api/board/content/${String(e.id)}/`));return{messages:s,message:a,apiPath:n,setMessage:r}}},c=s(3744);const m=(0,c.Z)(u,[["render",n]]);var p=m},7091:function(e,t,s){s.r(t),s.d(t,{default:function(){return Q}});var a=s(6252),r=s(9963);const n=e=>((0,a.dD)("data-v-66a9dc5f"),e=e(),(0,a.Cn)(),e),i=n((()=>(0,a._)("h1",null,"mail/read - search",-1))),o={key:0},d=(0,a.Uk)("Next");function l(e,t,s,n,l,u){const c=(0,a.up)("search-form"),m=(0,a.up)("one-message-row"),p=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",null,[i,(0,a.Wm)(c),n.nowLoading?((0,a.wg)(),(0,a.iD)("div",o,"now loading")):((0,a.wg)(),(0,a.j4)(r.W3,{key:1,name:"message-row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.messages,(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,message:e,class:"one-message-row"},null,8,["message"])))),128))])),_:1})),(0,a.Wm)(p,{to:{query:n.differentPageQuery(2)}},{default:(0,a.w5)((()=>[d])),_:1},8,["to"])])}var u=s(2262),c=s(5501),m=s(2119),p=s(3577);const k=["id"],_={class:"col-12 my-1"},g={class:"col-12"},y={class:"float-left date small p-1"},b={class:"float-left ml-4 whosent"},f={key:0,src:"/static/img/star_yl.png",width:"16",height:"16"},w={key:1,src:"/static/img/star_bk.png",width:"16",height:"16"},v={class:"col-12 my-2"};function h(e,t,s,r,n,i){const o=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("section",{class:"content row border-bottom",id:"message-id-"+String(s.message.id)},[(0,a._)("h4",_,[(0,a.Wm)(o,{to:r.link},{default:(0,a.w5)((()=>[(0,a.Uk)((0,p.zw)(String(s.message.id))+" - "+(0,p.zw)(s.message.title),1)])),_:1},8,["to"])]),(0,a._)("div",g,[(0,a._)("span",y,(0,p.zw)(s.message.created_at),1),(0,a._)("span",b,(0,p.zw)(s.message.writer),1),(0,a._)("span",{class:"float-right",onClick:t[0]||(t[0]=(...e)=>r.bookmark&&r.bookmark(...e))},[s.message.is_bookmarked?((0,a.wg)(),(0,a.iD)("img",f)):((0,a.wg)(),(0,a.iD)("img",w))])]),(0,a._)("article",v,(0,p.zw)(r.trimed),1)],8,k)}var q={props:{message:{required:!0,type:Object}},setup(e){const t=(0,c.oR)(),s=(0,u.Fl)((()=>e.message)),a=(0,u.Fl)((()=>{const e=s.value.content;let t=e.indexOf("\n");return t<0&&(t=0),e.slice(t,t+200)})),r=(0,u.Fl)((()=>`/mail/${String(s.value.id)}`)),n=()=>{t.dispatch("read/toggleBookmark",s.value.id)};return{bookmark:n,trimed:a,link:r}}},x=s(3744);const z=(0,x.Z)(q,[["render",h],["__scopeId","data-v-194b953b"]]);var C=z;const D=e=>((0,a.dD)("data-v-c03d327e"),e=e(),(0,a.Cn)(),e),P={class:"col-12"},F={class:"col-12"},I={class:"d-inline-block"},N=D((()=>(0,a._)("label",{for:"is_kaisei"},"回生メーリスのみ:",-1))),Z={class:"d-inline-block"},j=D((()=>(0,a._)("label",{for:"is_zenkai"},"全回メーリスのみ:",-1))),S={class:"d-inline-block"},A=D((()=>(0,a._)("label",{for:"is_bookmark"},"ブックマークのみ:",-1))),L={class:"d-inline-block"},U=D((()=>(0,a._)("label",{for:"is_sender"},"送信したメーリスのみ:",-1))),W=D((()=>(0,a._)("button",null,"検索",-1)));function R(e,t,s,n,i,o){return(0,a.wg)(),(0,a.iD)("form",{class:"content row pb-3 border-bottom",onSubmit:t[5]||(t[5]=(...e)=>n.submit&&n.submit(...e))},[(0,a._)("div",P,[(0,a.wy)((0,a._)("input",{type:"text",name:"text",placeholder:"件名・本文で検索",class:"form-control formtext",id:"id_text","onUpdate:modelValue":t[0]||(t[0]=e=>n.params.text=e)},null,512),[[r.nr,n.params.text]])]),(0,a._)("div",F,[(0,a._)("div",I,[(0,a.wy)((0,a._)("input",{type:"checkbox",name:"is_kaisei",class:"",id:"is_kaisei","onUpdate:modelValue":t[1]||(t[1]=e=>n.params.is_kaisei=e)},null,512),[[r.e8,n.params.is_kaisei]]),N]),(0,a._)("div",Z,[(0,a.wy)((0,a._)("input",{type:"checkbox",name:"is_zenkai",class:"",id:"is_zenkai","onUpdate:modelValue":t[2]||(t[2]=e=>n.params.is_zenkai=e)},null,512),[[r.e8,n.params.is_zenkai]]),j]),(0,a._)("div",S,[(0,a.wy)((0,a._)("input",{type:"checkbox",name:"is_bookmark",class:"",id:"is_bookmark","onUpdate:modelValue":t[3]||(t[3]=e=>n.params.is_bookmark=e)},null,512),[[r.e8,n.params.is_bookmark]]),A]),(0,a._)("div",L,[(0,a.wy)((0,a._)("input",{type:"checkbox",name:"is_sender",class:"",id:"is_sender","onUpdate:modelValue":t[4]||(t[4]=e=>n.params.is_sender=e)},null,512),[[r.e8,n.params.is_sender]]),U])]),W],32)}var M={name:"searchform",setup(){const e=(0,m.tv)(),t=(0,m.yj)(),s=(0,u.qj)({is_kaisei:!1,is_zenkai:!1,is_bookmark:!1,is_sender:!1,text:"",page:1}),r=t=>{t.preventDefault();const a={};s.is_kaisei&&(a.is_kaisei=!0),s.is_zenkai&&(a.is_zenkai=!0),s.is_bookmark&&(a.is_bookmark=!0),s.is_sender&&(a.is_sender=!0),s.text.length>0&&(a.text=s.text),s.page>1&&(a.page=s.page),e.push({query:a})};return(0,a.bv)((()=>{t.query.is_kaisei&&"true"===t.query.is_kaisei&&(s.is_kaisei=!0),t.query.is_zenkai&&"true"===t.query.is_zenkai&&(s.is_zenkai=!0),t.query.is_bookmark&&"true"===t.query.is_bookmark&&(s.is_bookmark=!0),t.query.is_sender&&"true"===t.query.is_sender&&(s.is_sender=!0),t.query.text&&(s.text=t.query.text),t.query.page&&Number(t.query.page)>1&&(s.page=Number(t.query.page))})),{params:s,submit:r}}};const V=(0,x.Z)(M,[["render",R],["__scopeId","data-v-c03d327e"]]);var $=V,H={components:{oneMessageRow:C,searchForm:$},setup(){const e=(0,c.oR)(),t=(0,m.yj)();(0,a.YP)(t,(()=>{o()}));const s=(0,u.Fl)((()=>e.state.read.messages)),r=(0,u.Fl)((()=>e.state.read.nowLoading)),n=(0,u.Fl)((()=>{const e={};return t.query.is_kaisei&&"true"===t.query.is_kaisei&&(e.is_kaisei=!0),t.query.is_zenkai&&"true"===t.query.is_zenkai&&(e.is_zenkai=!0),t.query.is_bookmark&&"true"===t.query.is_bookmark&&(e.is_bookmark=!0),t.query.is_sender&&"true"===t.query.is_sender&&(e.is_sender=!0),t.query.text&&(e.text=t.query.text),t.query.page&&Number(t.query.page)>1&&(e.page=Number(t.query.page)),e})),i=e=>({...n.value,page:e}),o=()=>{e.dispatch("read/getMessagesFromAPI",n.value)};return 0===s.value.length&&o(),(0,a.bv)((()=>o())),{messages:s,nowLoading:r,differentPageQuery:i}}};const O=(0,x.Z)(H,[["render",l],["__scopeId","data-v-66a9dc5f"]]);var Q=O}}]);
//# sourceMappingURL=read.3eb5f424.js.map