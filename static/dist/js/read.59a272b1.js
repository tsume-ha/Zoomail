"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[886],{1682:function(A,e,a){a.d(e,{Z:function(){return _}});var t=a(6252);const s={key:0},n={key:1},i={key:2},r=(0,t.Uk)(" please retry. "),o={key:4};function l(A,e,a,l,u,g){return l.status.loading?((0,t.wg)(),(0,t.iD)("div",s,"loading...")):l.status.notFound?((0,t.wg)(),(0,t.iD)("div",n,"404")):l.status.loading||l.status.loaded?l.status.loaded?(0,t.WI)(A.$slots,"default",{key:3}):((0,t.wg)(),(0,t.iD)("div",o)):((0,t.wg)(),(0,t.iD)("div",i,[r,(0,t._)("button",{onClick:e[0]||(e[0]=(...A)=>l.reload&&l.reload(...A))},"再読み込み")]))}var u=a(2262),g=a(2119),d=a(8410),c=a(8042),m={props:{id:{type:Number,required:!0},dataList:{type:Array,required:!0},oneContentAPIPath:{type:String,required:!0}},setup(A,e){const a=(0,g.yj)(),t=(0,d.oR)(),s=Number(a.params.id),n=(0,u.qj)({loading:!0,loaded:!1,notFound:!1}),i=()=>{c.Z.get(A.oneContentAPIPath).then((A=>{n.loaded=!0;const a={...A.data};e.emit("setContent",a)})).catch((A=>{"Network Error"==A.message&&void 0===A.response?console.log("通信エラー"):500===A.response.status?(n.loaded=!0,console.log("500")):403===A.response.status||404===A.response.status?(n.loaded=!0,n.notFound=!0):(console.log(A.message),t.commit("message/addMessage",{level:"error",message:`予想外のエラーが帰ってきました。: ${A.message}`,appname:"abscractComtent"}))})).finally((()=>{n.loading=!1}))};if(A.dataList.some((A=>Number(A.id)===s))){const a={...A.dataList.find((A=>Number(A.id)===s))};e.emit("setContent",a),n.loading=!1,n.loaded=!0}else i();const r=()=>i();return{status:n,reload:r}}},k=a(3744);const p=(0,k.Z)(m,[["render",l]]);var _=p},7326:function(A,e,a){a.r(e),a.d(e,{default:function(){return b}});var t=a(6252),s=a(3577),n=a(6372),i=a(3894);const r={key:0,src:n,width:"16",height:"16",alt:"bookmarked"},o={key:1,src:i,width:"16",height:"16",alt:"not bookmarkd yet"},l=["innerHTML"],u={key:0,class:"content-attachments"},g=["href"],d=(0,t.Uk)("戻る");function c(A,e,a,n,i,c){const m=(0,t.up)("router-link"),k=(0,t.up)("abstract-content");return(0,t.wg)(),(0,t.j4)(k,{id:a.id,dataList:n.messages,oneContentAPIPath:n.apiPath,onSetContent:n.setMessage},{default:(0,t.w5)((()=>[(0,t._)("article",null,[(0,t._)("header",null,[(0,t._)("h3",null,(0,s.zw)(n.message.title),1),(0,t._)("div",null,[(0,t._)("time",null,(0,s.zw)(n.message.created_at),1),(0,t._)("span",null,(0,s.zw)(n.message.writer),1),(0,t._)("button",{onClick:e[0]||(e[0]=(...e)=>A.bookmark&&A.bookmark(...e))},[n.message.is_bookmarked?((0,t.wg)(),(0,t.iD)("img",r)):((0,t.wg)(),(0,t.iD)("img",o))])])]),(0,t._)("div",{class:"message-content card",innerHTML:n.message.html},null,8,l),n.message.attachments.length?((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("h4",null,"添付ファイル: "+(0,s.zw)(n.message.attachments.length)+"件",1),(0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.message.attachments,(A=>((0,t.wg)(),(0,t.iD)("li",{key:A.id},[(0,t._)("a",{href:`/download/mail/${n.message.id}/${A.id}/`,target:"_blank"},(0,s.zw)(A.filename),9,g)])))),128))])])):(0,t.kq)("",!0),(0,t.Wm)(m,{to:n.returnTo,class:"pure-button return"},{default:(0,t.w5)((()=>[d])),_:1},8,["to"])])])),_:1},8,["id","dataList","oneContentAPIPath","onSetContent"])}var m=a(1682),k=a(2262),p=a(8410),_={components:{AbstractContent:m.Z},props:{id:{required:!0,type:Number}},setup(A){const e=(0,p.oR)(),a=(0,t.Fl)((()=>e.state.read.messages)),s=(0,k.iH)({}),n=A=>{s.value=A},i=(0,t.Fl)((()=>`/api/board/content/${String(A.id)}/`)),r=(0,t.Fl)((()=>null===e.state.lastPath||void 0===e.state.lastPath?{name:"mail:index"}:{...e.state.lastPath}));return{messages:a,message:s,apiPath:i,setMessage:n,returnTo:r}}},w=a(3744);const y=(0,w.Z)(_,[["render",c],["__scopeId","data-v-9eb2374e"]]);var b=y},1075:function(A,e,a){a.r(e),a.d(e,{default:function(){return W}});var t=a(6252),s=a(9963);const n=A=>((0,t.dD)("data-v-5b476c29"),A=A(),(0,t.Cn)(),A),i=n((()=>(0,t._)("h3",null,"メーリス・受信ボックス",-1))),r={key:0};function o(A,e,a,n,o,l){const u=(0,t.up)("search-form"),g=(0,t.up)("one-message-row"),d=(0,t.up)("Paginator");return(0,t.wg)(),(0,t.iD)("article",null,[i,(0,t.Wm)(u),n.nowLoading?((0,t.wg)(),(0,t.iD)("div",r,"now loading")):((0,t.wg)(),(0,t.j4)(s.W3,{key:1,name:"message-row",appear:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.messages,(A=>((0,t.wg)(),(0,t.j4)(g,{key:A.id,message:A,class:"one-message-row"},null,8,["message"])))),128))])),_:1})),(0,t.Wm)(d,{pages:n.totalPages,page:n.page,onPageTo:n.handlePageJump},null,8,["pages","page","onPageTo"])])}var l=a(8410),u=a(2119),g=a(3577),d=a(6372),c=a(3894);const m=["id"],k={key:0,src:d,width:"16",height:"16",alt:"bookmarked"},p={key:1,src:c,width:"16",height:"16",alt:"not bookmarkd yet"};function _(A,e,a,s,n,i){const r=(0,t.up)("router-link"),o=(0,t.up)("Icon");return(0,t.wg)(),(0,t.iD)("section",{class:"card",id:"message-id-"+String(a.message.id)},[(0,t._)("h4",null,[(0,t.Wm)(r,{to:s.link},{default:(0,t.w5)((()=>[(0,t.Uk)((0,g.zw)(a.message.title),1)])),_:1},8,["to"]),a.message.attachments.length?((0,t.wg)(),(0,t.j4)(o,{key:0,icon:"paperclip"})):(0,t.kq)("",!0)]),(0,t._)("div",null,[(0,t._)("time",null,(0,g.zw)(a.message.created_at),1),(0,t._)("span",null,(0,g.zw)(a.message.writer),1),(0,t._)("button",{onClick:e[0]||(e[0]=(...A)=>s.bookmark&&s.bookmark(...A))},[a.message.is_bookmarked?((0,t.wg)(),(0,t.iD)("img",k)):((0,t.wg)(),(0,t.iD)("img",p))])]),(0,t._)("p",null,(0,g.zw)(s.trimed),1)],8,m)}var w={props:{message:{required:!0,type:Object}},setup(A){const e=(0,l.oR)(),a=(0,t.Fl)((()=>A.message)),s=(0,t.Fl)((()=>{const A=a.value.content;let e=A.indexOf("\n");return e<0&&(e=0),A.slice(e,e+200)})),n=(0,t.Fl)((()=>`/mail/${String(a.value.id)}`)),i=()=>{e.dispatch("read/toggleBookmark",a.value.id)};return{bookmark:i,trimed:s,link:n}}},y=a(3744);const b=(0,y.Z)(w,[["render",_],["__scopeId","data-v-6ce4b912"]]);var h=b;const f=A=>((0,t.dD)("data-v-1ac2013f"),A=A(),(0,t.Cn)(),A),q=(0,t.Uk)("回生メーリス: "),v=(0,t.Uk)("全回メーリス: "),P=(0,t.Uk)("ブックマーク: "),D=(0,t.Uk)("送信したメーリス: "),C=f((()=>(0,t._)("button",{class:"pure-button search",type:"submit"},"検索",-1)));function z(A,e,a,n,i,r){return(0,t.wg)(),(0,t.iD)("form",{class:"pure-form pure-g",onSubmit:e[9]||(e[9]=(...A)=>n.submit&&n.submit(...A))},[(0,t._)("label",null,[q,(0,t.wy)((0,t._)("input",{type:"checkbox",name:"is_kaisei","onUpdate:modelValue":e[0]||(e[0]=A=>n.params.is_kaisei=A),onChange:e[1]||(e[1]=(...A)=>n.resetPage&&n.resetPage(...A))},null,544),[[s.e8,n.params.is_kaisei]])]),(0,t._)("label",null,[v,(0,t.wy)((0,t._)("input",{type:"checkbox",name:"is_zenkai","onUpdate:modelValue":e[2]||(e[2]=A=>n.params.is_zenkai=A),onChange:e[3]||(e[3]=(...A)=>n.resetPage&&n.resetPage(...A))},null,544),[[s.e8,n.params.is_zenkai]])]),(0,t._)("label",null,[P,(0,t.wy)((0,t._)("input",{type:"checkbox",name:"is_bookmark","onUpdate:modelValue":e[4]||(e[4]=A=>n.params.is_bookmark=A),onChange:e[5]||(e[5]=(...A)=>n.resetPage&&n.resetPage(...A))},null,544),[[s.e8,n.params.is_bookmark]])]),(0,t._)("label",null,[D,(0,t.wy)((0,t._)("input",{type:"checkbox",name:"is_sender","onUpdate:modelValue":e[6]||(e[6]=A=>n.params.is_sender=A),onChange:e[7]||(e[7]=(...A)=>n.resetPage&&n.resetPage(...A))},null,544),[[s.e8,n.params.is_sender]])]),(0,t.wy)((0,t._)("input",{type:"text",name:"text",placeholder:"件名・本文で検索",class:"formtext",id:"id_text","onUpdate:modelValue":e[8]||(e[8]=A=>n.params.text=A)},null,512),[[s.nr,n.params.text]]),C],32)}var x=a(2262),U={name:"searchform",setup(){const A=(0,u.tv)(),e=(0,u.yj)(),a=(0,x.qj)({is_kaisei:!1,is_zenkai:!1,is_bookmark:!1,is_sender:!1,text:"",page:1}),s=e=>{e.preventDefault();const t={};a.is_kaisei&&(t.is_kaisei=!0),a.is_zenkai&&(t.is_zenkai=!0),a.is_bookmark&&(t.is_bookmark=!0),a.is_sender&&(t.is_sender=!0),a.text.length>0&&(t.text=a.text),a.page>1&&(t.page=a.page),A.push({query:t})};(0,t.bv)((()=>{e.query.is_kaisei&&"true"===e.query.is_kaisei&&(a.is_kaisei=!0),e.query.is_zenkai&&"true"===e.query.is_zenkai&&(a.is_zenkai=!0),e.query.is_bookmark&&"true"===e.query.is_bookmark&&(a.is_bookmark=!0),e.query.is_sender&&"true"===e.query.is_sender&&(a.is_sender=!0),e.query.text&&(a.text=e.query.text),e.query.page&&Number(e.query.page)>1&&(a.page=Number(e.query.page))}));const n=()=>{a.page=1};return{params:a,submit:s,resetPage:n}}};const B=(0,y.Z)(U,[["render",z],["__scopeId","data-v-1ac2013f"]]);var F=B;const N={key:1,class:"circle"},I={key:4,class:"circle"};function j(A,e,a,s,n,i){const r=(0,t.up)("Icon");return(0,t.wg)(),(0,t.iD)("ul",null,[(0,t._)("li",{onClick:e[0]||(e[0]=A=>i.clicked(a.page-1)),class:(0,g.C_)({disabled:1===a.page})},[(0,t.Wm)(r,{icon:"angle-left"})],2),a.page>1?((0,t.wg)(),(0,t.iD)("li",{key:0,onClick:e[1]||(e[1]=A=>i.clicked(1))},"1")):(0,t.kq)("",!0),a.page-1-1>1?((0,t.wg)(),(0,t.iD)("li",N)):(0,t.kq)("",!0),a.page-1>1?((0,t.wg)(),(0,t.iD)("li",{key:2,onClick:e[2]||(e[2]=A=>i.clicked(a.page-1))},(0,g.zw)(a.page-1),1)):(0,t.kq)("",!0),(0,t._)("li",{onClick:e[3]||(e[3]=A=>i.clicked(a.page)),class:"active"},(0,g.zw)(a.page),1),a.page+1<a.pages?((0,t.wg)(),(0,t.iD)("li",{key:3,onClick:e[4]||(e[4]=A=>i.clicked(a.page+1))},(0,g.zw)(a.page+1),1)):(0,t.kq)("",!0),a.pages-(a.page+1)>1?((0,t.wg)(),(0,t.iD)("li",I)):(0,t.kq)("",!0),a.page<a.pages?((0,t.wg)(),(0,t.iD)("li",{key:5,onClick:e[5]||(e[5]=A=>i.clicked(a.pages))},(0,g.zw)(a.pages),1)):(0,t.kq)("",!0),(0,t._)("li",{onClick:e[6]||(e[6]=A=>i.clicked(a.page+1)),class:(0,g.C_)({disabled:a.page===a.pages})},[(0,t.Wm)(r,{icon:"angle-right"})],2)])}var R={props:{pages:{required:!0,type:Number},page:{required:!0,type:Number}},methods:{clicked(A){this.$emit("pageTo",A)}}};const S=(0,y.Z)(R,[["render",j],["__scopeId","data-v-6ce965f0"]]);var M=S,T={components:{oneMessageRow:h,searchForm:F,Paginator:M},setup(){const A=(0,l.oR)(),e=(0,u.yj)(),a=(0,u.tv)();(0,t.YP)(e,(()=>{o()})),(0,u.iS)(((A,e,a)=>{o(),a()}));const s=(0,t.Fl)((()=>A.state.read.messages)),n=(0,t.Fl)((()=>A.state.read.nowLoading)),i=(0,t.Fl)((()=>{const A={};return e.query.is_kaisei&&"true"===e.query.is_kaisei&&(A.is_kaisei=!0),e.query.is_zenkai&&"true"===e.query.is_zenkai&&(A.is_zenkai=!0),e.query.is_bookmark&&"true"===e.query.is_bookmark&&(A.is_bookmark=!0),e.query.is_sender&&"true"===e.query.is_sender&&(A.is_sender=!0),e.query.text&&(A.text=e.query.text),e.query.page&&Number(e.query.page)>1&&(A.page=Number(e.query.page)),A})),r=A=>({...i.value,page:A}),o=()=>{A.dispatch("read/getMessagesFromAPI",i.value)};0===s.value.length&&o(),(0,t.bv)((()=>o()));const g=(0,t.Fl)((()=>Number(e.query.page)||1)),d=(0,t.Fl)((()=>A.state.read.totalPages)),c=A=>{a.push({query:r(A)})};return{messages:s,nowLoading:n,page:g,totalPages:d,differentPageQuery:r,handlePageJump:c}}};const L=(0,y.Z)(T,[["render",o],["__scopeId","data-v-5b476c29"]]);var W=L},3894:function(A){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAABlBMVEUAAAD///+l2Z/dAAAAAnRSTlP/AOW3MEoAAABzSURBVHjaY/z/v7GB8f+/Qw5Q4s8TBWTixw8BZOIFgwTjAf+Hwoz7HRj+MdY3MPyHEGDufQWGP4zPJRheMP5mYXjA+IeZAWheQz0jEvGPkaEBifjL2OjA+JfhEAPj3293PjD+/sIB1Lsk6hnj75b6h2ADAKN8SaNcL47vAAAAAElFTkSuQmCC"},6372:function(A){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAADAFBMVEX////99PT76ur/8gAAAAAADsQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADnB6g6AAAAAXRSTlMAQObYZgAAAJlJREFUeNqtk0kWhDAIRCnl/ifGR0c0A2DHhWGVFD9DVRTki0m8gNBXgnwBSp8CsRiwfiDWAkw3MIaFU6+laZWUMSv9Lwim/UK8A9inRxyg2SUgdmGmZ8TsmqPnY3Bot5w3qWnVTLbNEy3uFhp/BZLXSiwDuL+0eiIARR2GCbjCuUNzAI+Sn3Zg/BJtkwBcT9M87OqA/Nc35QefbUoqVIYDNwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=read.59a272b1.js.map