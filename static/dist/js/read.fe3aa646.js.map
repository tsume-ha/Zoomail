{"version":3,"file":"static/dist/js/read.fe3aa646.js","mappings":"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","sources":["webpack://front/./src/components/AbstractContent.vue","webpack://front/./src/components/AbstractContent.vue?c282","webpack://front/./src/pages/mail/content.vue","webpack://front/./src/pages/mail/content.vue?58dd","webpack://front/./src/pages/mail/index.vue","webpack://front/./src/pages/mail/components/one-message-row.vue","webpack://front/./src/pages/mail/components/one-message-row.vue?1807","webpack://front/./src/pages/mail/components/search-form.vue","webpack://front/./src/pages/mail/components/search-form.vue?0e36","webpack://front/./src/components/Paginator.vue","webpack://front/./src/components/Paginator.vue?32c1","webpack://front/./src/pages/mail/index.vue?c700"],"sourcesContent":["<template>\r\n  <div v-if=\"status.loading\">loading...</div>\r\n  <div v-else-if=\"status.notFound\">404</div>\r\n  <div v-else-if=\"!status.loading && !status.loaded\">\r\n    please retry.\r\n    <button @click=\"reload\">再読み込み</button>\r\n  </div>\r\n  <template v-else-if=\"status.loaded\">\r\n    <slot />\r\n  </template>\r\n  <div v-else></div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport axios from \"../utils/axios\";\r\nexport default {\r\n  props: {\r\n    id: { type: Number, required: true },\r\n    dataList: { type: Array, required: true },\r\n    oneContentAPIPath: { type: String, required: true },\r\n  },\r\n  setup(props, context) {\r\n    const route = useRoute();\r\n    const store = useStore();\r\n    const id = Number(route.params.id);\r\n\r\n    const status = reactive({\r\n      loading: true,\r\n      loaded: false,\r\n      notFound: false,\r\n    });\r\n\r\n    const loadAPI = () => {\r\n      axios\r\n        .get(props.oneContentAPIPath)\r\n        .then((res) => {\r\n          status.loaded = true;\r\n          const item = { ...res.data };\r\n          context.emit(\"setContent\", item);\r\n        })\r\n        .catch((error) => {\r\n          if (\r\n            error.message == \"Network Error\" &&\r\n            error.response === undefined\r\n          ) {\r\n            console.log(\"通信エラー\");\r\n          } else if (error.response.status === 500) {\r\n            status.loaded = true;\r\n            console.log(\"500\");\r\n          } else if (error.response.status === 403) {\r\n            status.loaded = true;\r\n            status.notFound = true;\r\n          } else if (error.response.status === 404) {\r\n            status.loaded = true;\r\n            status.notFound = true;\r\n          } else {\r\n            console.log(error.message);\r\n            store.commit(\"message/addMessage\", {\r\n              level: \"error\",\r\n              message: `予想外のエラーが帰ってきました。: ${error.message}`,\r\n              appname: \"abscractComtent\",\r\n            });\r\n          }\r\n        })\r\n        .finally(() => {\r\n          status.loading = false;\r\n        });\r\n    };\r\n\r\n    if (props.dataList.some((item) => Number(item.id) === id)) {\r\n      const item = { ...props.dataList.find((item) => Number(item.id) === id) };\r\n      context.emit(\"setContent\", item);\r\n      status.loading = false;\r\n      status.loaded = true;\r\n    } else {\r\n      loadAPI();\r\n    }\r\n\r\n    const reload = () => loadAPI();\r\n\r\n    return {\r\n      status,\r\n      reload,\r\n    };\r\n  },\r\n};\r\n</script>","import { render } from \"./AbstractContent.vue?vue&type=template&id=1d1b8d36\"\nimport script from \"./AbstractContent.vue?vue&type=script&lang=js\"\nexport * from \"./AbstractContent.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <abstract-content\r\n    :id=\"id\"\r\n    :dataList=\"messages\"\r\n    :oneContentAPIPath=\"apiPath\"\r\n    @setContent=\"setMessage\"\r\n  >\r\n    <article>\r\n      <header>\r\n        <h3>{{ message.title }}</h3>\r\n        <div>\r\n          <time>{{ message.created_at }}</time>\r\n          <span>{{ message.writer }}</span>\r\n          <button @click=\"bookmark\">\r\n            <img\r\n              src=\"@/assets/img/star_yl.png\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              v-if=\"message.is_bookmarked\"\r\n              alt=\"bookmarked\"\r\n            />\r\n            <img\r\n              src=\"@/assets/img/star_bk.png\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              v-else\r\n              alt=\"not bookmarkd yet\"\r\n            />\r\n          </button>\r\n        </div>\r\n      </header>\r\n      <div class=\"message-content card\" v-html=\"message.html\"></div>\r\n      <div v-if=\"message.attachments.length\" class=\"content-attachments\">\r\n        <h4>添付ファイル: {{ message.attachments.length }}件</h4>\r\n        <ul>\r\n          <li v-for=\"attachment in message.attachments\" :key=\"attachment.id\">\r\n            <a\r\n              :href=\"`/download/mail/${message.id}/${attachment.id}/`\"\r\n              target=\"_blank\"\r\n            >\r\n              {{ attachment.filename }}\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <router-link :to=\"returnTo\" class=\"pure-button return\">戻る</router-link>\r\n    </article>\r\n  </abstract-content>\r\n</template>\r\n\r\n<script>\r\nimport AbstractContent from \"../../components/AbstractContent.vue\";\r\nimport { computed, ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    AbstractContent,\r\n  },\r\n  props: {\r\n    id: { required: true, type: Number },\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n    // for AbstractContent.vue\r\n    const messages = computed(() => store.state.read.messages);\r\n    const message = ref({});\r\n    const setMessage = (item) => {\r\n      message.value = item;\r\n    };\r\n    const apiPath = computed(() => `/api/board/content/${String(props.id)}/`);\r\n\r\n    const returnTo = computed(() => {\r\n      if (store.state.lastPath === null || store.state.lastPath === undefined) {\r\n        return { name: \"mail:index\" };\r\n      } else {\r\n        return { ...store.state.lastPath };\r\n      }\r\n    });\r\n    return {\r\n      messages,\r\n      message,\r\n      apiPath,\r\n      setMessage,\r\n      returnTo,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\narticle {\r\n  padding: 1rem 0;\r\n  header {\r\n    height: auto;\r\n    > div {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 0.75rem 0;\r\n\r\n      > * {\r\n        display: inline-block;\r\n      }\r\n      time {\r\n        font-size: 0.75em;\r\n        margin-right: 0.5em;\r\n        flex-grow: 0.1;\r\n        flex-shrink: 0;\r\n        flex-basis: auto;\r\n      }\r\n      span {\r\n        flex-grow: 1;\r\n        flex-shrink: 1;\r\n        flex-basis: auto;\r\n      }\r\n      button {\r\n        background-color: transparent;\r\n        border: none;\r\n        width: 16px;\r\n        height: 16px;\r\n        margin-right: 0.5em;\r\n        flex-grow: 0;\r\n        flex-shrink: 0;\r\n        flex-basis: 16px;\r\n      }\r\n    }\r\n  }\r\n  div.message-content {\r\n    margin: 1rem 0;\r\n    padding: 0.5rem;\r\n  }\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\ndiv.message-content p {\r\n  margin: 1rem 0;\r\n  &:first-child {\r\n    margin-top: 0;\r\n  }\r\n  &:last-child {\r\n    margin-bottom: 0;\r\n  }\r\n  a {\r\n    font-style: italic;\r\n  }\r\n}\r\n</style>","import { render } from \"./content.vue?vue&type=template&id=9eb2374e&scoped=true\"\nimport script from \"./content.vue?vue&type=script&lang=js\"\nexport * from \"./content.vue?vue&type=script&lang=js\"\n\nimport \"./content.vue?vue&type=style&index=0&id=9eb2374e&lang=scss&scoped=true\"\nimport \"./content.vue?vue&type=style&index=1&id=9eb2374e&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9eb2374e\"]])\n\nexport default __exports__","<template>\r\n  <article>\r\n    <h3>メーリス・受信ボックス</h3>\r\n    <search-form />\r\n\r\n    <div v-if=\"nowLoading\">now loading</div>\r\n    <transition-group name=\"message-row\" v-else appear>\r\n      <one-message-row\r\n        v-for=\"mes in messages\"\r\n        :key=\"mes.id\"\r\n        :message=\"mes\"\r\n        class=\"one-message-row\"\r\n      />\r\n    </transition-group>\r\n\r\n    <Paginator :pages=\"totalPages\" :page=\"page\" @pageTo=\"handlePageJump\" />\r\n  </article>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute, onBeforeRouteLeave, useRouter } from \"vue-router\";\r\nimport oneMessageRow from \"./components/one-message-row.vue\";\r\nimport searchForm from \"./components/search-form.vue\";\r\nimport Paginator from \"@/components/Paginator.vue\";\r\nexport default {\r\n  components: {\r\n    oneMessageRow,\r\n    searchForm,\r\n    Paginator,\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n\r\n    watch(route, () => {\r\n      updateMessage();\r\n    });\r\n    onBeforeRouteLeave((_to, _from, next) => {\r\n      updateMessage();\r\n      next();\r\n    });\r\n\r\n    const messages = computed(() => store.state.read.messages);\r\n    const nowLoading = computed(() => store.state.read.nowLoading);\r\n\r\n    const cleanQuery = computed(() => {\r\n      const query = {};\r\n      if (route.query.is_kaisei && route.query.is_kaisei === \"true\") {\r\n        query.is_kaisei = true;\r\n      }\r\n      if (route.query.is_zenkai && route.query.is_zenkai === \"true\") {\r\n        query.is_zenkai = true;\r\n      }\r\n      if (route.query.is_bookmark && route.query.is_bookmark === \"true\") {\r\n        query.is_bookmark = true;\r\n      }\r\n      if (route.query.is_sender && route.query.is_sender === \"true\") {\r\n        query.is_sender = true;\r\n      }\r\n      if (route.query.text) {\r\n        query.text = route.query.text;\r\n      }\r\n      if (route.query.page && Number(route.query.page) > 1) {\r\n        query.page = Number(route.query.page);\r\n      }\r\n      return query;\r\n    });\r\n\r\n    const differentPageQuery = (pageNum) => {\r\n      return {\r\n        ...cleanQuery.value,\r\n        page: pageNum,\r\n      };\r\n    };\r\n\r\n    const updateMessage = () => {\r\n      store.dispatch(\"read/getMessagesFromAPI\", cleanQuery.value);\r\n    };\r\n\r\n    if (messages.value.length === 0) {\r\n      updateMessage();\r\n    }\r\n\r\n    onMounted(() => updateMessage());\r\n\r\n    // pagination\r\n    const page = computed(() => Number(route.query.page) || 1);\r\n    const totalPages = computed(() => store.state.read.totalPages);\r\n    const handlePageJump = (pageTo) => {\r\n      router.push({ query: differentPageQuery(pageTo) });\r\n    };\r\n    return {\r\n      messages,\r\n      nowLoading,\r\n      page,\r\n      totalPages,\r\n      differentPageQuery,\r\n      handlePageJump,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.one-message-row {\r\n  display: block;\r\n}\r\n.message-row-leave-active {\r\n  position: absolute;\r\n}\r\n.message-row-move {\r\n  transition: all 0.5s;\r\n}\r\n.message-row-enter-active {\r\n  transition: all 0.5s;\r\n}\r\n.message-row-enter-from {\r\n  opacity: 0;\r\n}\r\n.message-row-enter-to {\r\n  opacity: 1;\r\n}\r\n</style>","<template>\r\n  <section class=\"card\" :id=\"'message-id-'+String(message.id)\">\r\n    <h4>\r\n      <router-link :to=\"link\">{{message.title}}</router-link>\r\n      <Icon icon=\"paperclip\" v-if=\"message.attachments.length\" />\r\n    </h4>\r\n    <div>\r\n      <time>{{message.created_at}}</time>\r\n      <span>{{message.writer}}</span>\r\n      <button @click=\"bookmark\">\r\n        <img src=\"@/assets/img/star_yl.png\" width=\"16\" height=\"16\" v-if=\"message.is_bookmarked\" alt=\"bookmarked\"/>\r\n        <img src=\"@/assets/img/star_bk.png\" width=\"16\" height=\"16\" v-else alt=\"not bookmarkd yet\"/>\r\n      </button>\r\n    </div>\r\n    <p>\r\n      {{trimed}}\r\n    </p>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  props: {\r\n    message: {required: true, type: Object}\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n\r\n    const message = computed(() => props.message);\r\n    const trimed = computed(() => {\r\n      const text = message.value.content;\r\n      let count = text.indexOf(\"\\n\");\r\n      if (count < 0) {\r\n        count = 0;\r\n      }\r\n      return text.slice(count, count+200);\r\n    });\r\n    const link = computed(() => `/mail/${String(message.value.id)}`);\r\n\r\n    const bookmark = () => {\r\n      store.dispatch(\"read/toggleBookmark\", message.value.id);\r\n    };\r\n    return {\r\n      bookmark,\r\n      trimed, link\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nsection {\r\n  display: block;\r\n  margin: .4em 0;\r\n  padding: .5em;\r\n  color: $text-black;\r\n  \r\n  > * {\r\n    margin: .5em;\r\n  }\r\n  > div {\r\n    display: flex;\r\n    align-items: center;\r\n    \r\n    > * {\r\n      display: inline-block;\r\n    }\r\n    time {\r\n      font-size: .75em;\r\n      margin-right: .5em;\r\n      flex-grow: 0.1;\r\n      flex-shrink: 0;\r\n      flex-basis: auto;\r\n    }\r\n    span {\r\n      flex-grow: 1;\r\n      flex-shrink: 1;\r\n      flex-basis: auto;\r\n    }\r\n    button {\r\n      background-color: transparent;\r\n      border: none;\r\n      width: 16px;\r\n      height: 16px;\r\n      margin-right: .5em;\r\n      flex-grow: 0;\r\n      flex-shrink: 0;\r\n      flex-basis: 16px;\r\n    }\r\n  }\r\n  > h4 {\r\n    display: block;\r\n    font-size: 1.25em;\r\n    // color: $text-link-blue;\r\n    text-decoration: underline;\r\n  }\r\n\r\n  > p {\r\n    display: block;\r\n    line-height: 1.25;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\r\n  }\r\n}\r\n\r\n</style>","import { render } from \"./one-message-row.vue?vue&type=template&id=6ce4b912&scoped=true\"\nimport script from \"./one-message-row.vue?vue&type=script&lang=js\"\nexport * from \"./one-message-row.vue?vue&type=script&lang=js\"\n\nimport \"./one-message-row.vue?vue&type=style&index=0&id=6ce4b912&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ce4b912\"]])\n\nexport default __exports__","<template>\r\n  <form class=\"pure-form pure-g\" @submit=\"submit\">\r\n    <label\r\n      >回生メーリス:\r\n      <input\r\n        type=\"checkbox\"\r\n        name=\"is_kaisei\"\r\n        v-model=\"params.is_kaisei\"\r\n        @change=\"resetPage\"\r\n      />\r\n    </label>\r\n    <label\r\n      >全回メーリス:\r\n      <input\r\n        type=\"checkbox\"\r\n        name=\"is_zenkai\"\r\n        v-model=\"params.is_zenkai\"\r\n        @change=\"resetPage\"\r\n      />\r\n    </label>\r\n    <label\r\n      >ブックマーク:\r\n      <input\r\n        type=\"checkbox\"\r\n        name=\"is_bookmark\"\r\n        v-model=\"params.is_bookmark\"\r\n        @change=\"resetPage\"\r\n      />\r\n    </label>\r\n    <label\r\n      >送信したメーリス:\r\n      <input\r\n        type=\"checkbox\"\r\n        name=\"is_sender\"\r\n        v-model=\"params.is_sender\"\r\n        @change=\"resetPage\"\r\n      />\r\n    </label>\r\n    <input\r\n      type=\"text\"\r\n      name=\"text\"\r\n      placeholder=\"件名・本文で検索\"\r\n      class=\"formtext\"\r\n      id=\"id_text\"\r\n      v-model=\"params.text\"\r\n    />\r\n\r\n    <button class=\"pure-button search\" type=\"submit\">検索</button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nexport default {\r\n  name: \"searchform\",\r\n  setup() {\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    const params = reactive({\r\n      is_kaisei: false,\r\n      is_zenkai: false,\r\n      is_bookmark: false,\r\n      is_sender: false,\r\n      text: \"\",\r\n      page: 1,\r\n    });\r\n\r\n    const submit = (e) => {\r\n      e.preventDefault();\r\n\r\n      // clean params\r\n      const query = {};\r\n      if (params.is_kaisei) {\r\n        query.is_kaisei = true;\r\n      }\r\n      if (params.is_zenkai) {\r\n        query.is_zenkai = true;\r\n      }\r\n      if (params.is_bookmark) {\r\n        query.is_bookmark = true;\r\n      }\r\n      if (params.is_sender) {\r\n        query.is_sender = true;\r\n      }\r\n      if (params.text.length > 0) {\r\n        query.text = params.text;\r\n      }\r\n      if (params.page > 1) {\r\n        query.page = params.page;\r\n      }\r\n      router.push({ query });\r\n      // change only query\r\n    };\r\n\r\n    onMounted(() => {\r\n      if (route.query.is_kaisei && route.query.is_kaisei === \"true\") {\r\n        params.is_kaisei = true;\r\n      }\r\n      if (route.query.is_zenkai && route.query.is_zenkai === \"true\") {\r\n        params.is_zenkai = true;\r\n      }\r\n      if (route.query.is_bookmark && route.query.is_bookmark === \"true\") {\r\n        params.is_bookmark = true;\r\n      }\r\n      if (route.query.is_sender && route.query.is_sender === \"true\") {\r\n        params.is_sender = true;\r\n      }\r\n      if (route.query.text) {\r\n        params.text = route.query.text;\r\n      }\r\n      if (route.query.page && Number(route.query.page) > 1) {\r\n        params.page = Number(route.query.page);\r\n      }\r\n    });\r\n\r\n    const resetPage = () => {\r\n      params.page = 1;\r\n    };\r\n    return {\r\n      params,\r\n      submit,\r\n      resetPage,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\nform {\r\n  margin-bottom: 1em;\r\n}\r\n\r\n.formtext {\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  height: 2rem;\r\n  width: calc(100% - 4rem);\r\n  min-width: 10rem;\r\n  max-width: 33rem;\r\n  padding: 0.125rem 0.25rem;\r\n  margin-right: 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n.search {\r\n  display: inline-block;\r\n  box-sizing: border-box;\r\n  height: 2rem;\r\n  width: 3.5rem;\r\n  padding: 0.125rem 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\nlabel {\r\n  display: inline-flex;\r\n  font-size: 0.75rem;\r\n  margin-right: 1rem !important;\r\n  align-items: flex-end;\r\n\r\n  input[type=\"checkbox\"] {\r\n    display: inline-block;\r\n    margin-left: 0.2rem;\r\n  }\r\n}\r\n</style>","import { render } from \"./search-form.vue?vue&type=template&id=1ac2013f&scoped=true\"\nimport script from \"./search-form.vue?vue&type=script&lang=js\"\nexport * from \"./search-form.vue?vue&type=script&lang=js\"\n\nimport \"./search-form.vue?vue&type=style&index=0&id=1ac2013f&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1ac2013f\"]])\n\nexport default __exports__","<template>\r\n  <ul>\r\n    <li @click=\"clicked(page - 1)\" :class=\"{ disabled: page === 1 }\">\r\n      <Icon icon=\"angle-left\" />\r\n    </li>\r\n    <li @click=\"clicked(1)\" v-if=\"page > 1\">1</li>\r\n    <li class=\"circle\" v-if=\"page - 1 - 1 > 1\"></li>\r\n    <li @click=\"clicked(page - 1)\" v-if=\"page - 1 > 1\">\r\n      {{ page - 1 }}\r\n    </li>\r\n    <li @click=\"clicked(page)\" class=\"active\">\r\n      {{ page }}\r\n    </li>\r\n    <li @click=\"clicked(page + 1)\" v-if=\"page + 1 < pages\">\r\n      {{ page + 1 }}\r\n    </li>\r\n    <li class=\"circle\" v-if=\"pages - (page + 1) > 1\"></li>\r\n    <li @click=\"clicked(pages)\" v-if=\"page < pages\">\r\n      {{ pages }}\r\n    </li>\r\n    <li @click=\"clicked(page + 1)\" :class=\"{ disabled: page === pages }\">\r\n      <Icon icon=\"angle-right\" />\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    pages: { required: true, type: Number },\r\n    page: { required: true, type: Number },\r\n  },\r\n  // setup(_props, context) {\r\n  //   const clicked = page => {\r\n  //     context.emit(\"pageTo\", page);\r\n  //   };\r\n  //   return {\r\n  //     clicked\r\n  //   };\r\n  // },\r\n  methods: {\r\n    clicked(pageTo) {\r\n      this.$emit(\"pageTo\", pageTo);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nul {\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 3rem 0 1rem;\r\n  padding: 0;\r\n  // background-color: $bg-dark;\r\n  border-radius: 1rem;\r\n  li {\r\n    list-style: none;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n    margin: 0.5rem;\r\n    padding: 0.65rem 0.4rem;\r\n    min-width: 2.5rem;\r\n    min-height: 2.5rem;\r\n    line-height: 100%;\r\n    font-size: 1rem;\r\n    border-radius: 50%;\r\n    background-color: $bg-light-lighten3;\r\n    cursor: pointer;\r\n\r\n    &.circle {\r\n      min-width: 0.4rem;\r\n      min-height: 0.4rem;\r\n      padding: 0.1rem;\r\n      cursor: default;\r\n    }\r\n    &.disabled {\r\n      color: $text-dark;\r\n    }\r\n    &.active {\r\n      background-color: $bg-light;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./Paginator.vue?vue&type=template&id=6ce965f0&scoped=true\"\nimport script from \"./Paginator.vue?vue&type=script&lang=js\"\nexport * from \"./Paginator.vue?vue&type=script&lang=js\"\n\nimport \"./Paginator.vue?vue&type=style&index=0&id=6ce965f0&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ce965f0\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=5b476c29&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=5b476c29&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\mhash\\\\Documents\\\\UnpluggedMessage\\\\front\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b476c29\"]])\n\nexport default __exports__"],"names":["status","loading","notFound","loaded","reload","props","id","type","Number","required","dataList","Array","oneContentAPIPath","String","setup","context","route","store","params","loadAPI","axios","then","res","item","data","emit","catch","error","message","undefined","response","console","log","commit","level","appname","finally","some","find","__exports__","render","src","width","height","alt","class","messages","apiPath","setMessage","title","created_at","writer","bookmark","is_bookmarked","html","attachments","length","attachment","key","href","target","filename","to","returnTo","components","AbstractContent","state","read","value","lastPath","name","nowLoading","appear","mes","pages","totalPages","page","handlePageJump","link","icon","trimed","Object","text","content","count","indexOf","slice","dispatch","submit","is_kaisei","resetPage","is_zenkai","is_bookmark","is_sender","placeholder","router","e","preventDefault","query","push","clicked","methods","pageTo","this","$emit","oneMessageRow","searchForm","Paginator","updateMessage","_to","_from","next","cleanQuery","differentPageQuery","pageNum"],"sourceRoot":""}