{"version":3,"file":"static/dist/css/read.4cb1c27a.css","mappings":"AAkDA,kCACE,aAAc,CACd,kBAAmB,CACnB,sBAAuB,CACvB,eACF,CAIA,kEACC,aACD,CC0CA,gCACE,oBAAqB,CACrB,UAAW,CACX,eACF,CAEA,sCACE,YACF,CAEA,uBACI,oBAAqB,CACrB,iBAAkB,CAClB,WAAY,CACZ,yBAA2B,CAC3B,gBAAkB,CAClB,eAAiB,CACjB,iBACJ,CACA,8BACE,oBAAqB,CACrB,UAAW,CACX,iBAAkB,CAChB,WAAa,CACb,SAAW,CACb,YAAa,CACb,aAAc,CACd,QAAS,CACT,SAAU,CACV,qBAAsB,CACtB,kBAAmB,CACnB,cACF,CACA,6BACE,aAAc,CACd,UAAW,CACX,iBAAkB,CAClB,UAAY,CACZ,YAAa,CACb,WAAa,CACb,YAAc,CACd,oBAAsB,CACtB,qBAAsB,CACtB,cACF,CACA,4CACE,oBACF,CACA,2CACE,YAAc,CACd,wBACF,CCrEA,kCACE,aACF,CACA,2CACE,iBACF,CACA,mCACE,kBACF,CC5DA,iCACE,YAAa,CACb,QAAS,CACT,SAAU,CACV,WAAY,CACZ,UACF,CACA,oCACE,gBAEF,CACA,6BACE,WAAY,CACZ,UAAW,CACX,aAAc,CACd,iBAAkB,CAClB,eAAgB,CAChB,2BACF,CACA,oCACE,UAAW,CACX,WAAY,CACZ,UAAW,CACX,aAAc,CACd,qBAAsB,CACtB,oBAAqB,CACrB,qBAAsB,CACtB,wBAAyB,CACzB,gCAAiC,CACjC,6BAA8B,CAC9B,2BAA4B,CAC5B,4BAA6B,CAC7B,iBAAkB,CAClB,OAAQ,CACR,QACF,CACA,mCACE,UAAW,CACX,UAAW,CACX,UAAW,CACX,aAAc,CACd,eAAgB,CAChB,iBAAkB,CAClB,UAAW,CACX,QACF","sources":["webpack://front/./src/pages/mail/components/one-message-row.vue","webpack://front/./src/pages/mail/components/search-form.vue","webpack://front/./src/pages/mail/index.vue","webpack://front/./src/components/AbstractContentHeader.vue"],"sourcesContent":["<template>\r\n  <section class=\"content row border-bottom\" :id=\"'message-id-'+String(message.id)\">\r\n    <h4 class=\"col-12 my-1\"><router-link :to=\"link\">{{String(message.id)}} - {{message.title}}</router-link></h4>\r\n    <div class=\"col-12\">\r\n      <span class=\"float-left date small p-1\">{{message.created_at}}</span>\r\n      <span class=\"float-left ml-4 whosent\">{{message.writer}}</span>\r\n      <span class=\"float-right\" @click=\"bookmark\">\r\n        <img src=\"/static/img/star_yl.png\" width=\"16\" height=\"16\" v-if=\"message.is_bookmarked\">\r\n        <img src=\"/static/img/star_bk.png\" width=\"16\" height=\"16\" v-else>\r\n      </span>\r\n    </div>\r\n    <article class=\"col-12 my-2\">\r\n      {{trimed}}\r\n    </article>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nexport default {\r\n  props: {\r\n    message: {required: true, type: Object}\r\n  },\r\n  setup(props) {\r\n    const store = useStore();\r\n\r\n    const message = computed(() => props.message);\r\n    const trimed = computed(() => {\r\n      const text = message.value.content;\r\n      let count = text.indexOf(\"\\n\");\r\n      if (count < 0) {\r\n        count = 0;\r\n      }\r\n      return text.slice(count, count+200);\r\n    });\r\n    const link = computed(() => `/mail/${String(message.value.id)}`);\r\n\r\n    const bookmark = () => {\r\n      store.dispatch(\"read/toggleBookmark\", message.value.id);\r\n    };\r\n    return {\r\n      bookmark,\r\n      trimed, link\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.content article{\r\n  display: block;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n}\r\nsection h4 a{\r\n\tcolor: #0058B3;\r\n}\r\nsection:hover h4 a{\r\n\tcolor: #0058B3;\r\n}\r\n</style>","<template>\r\n  <form class=\"content row pb-3 border-bottom\" @submit=\"submit\">\r\n    <div class=\"col-12\">\r\n      <input type=\"text\" name=\"text\" placeholder=\"件名・本文で検索\" class=\"form-control formtext\" id=\"id_text\" v-model=\"params.text\">\r\n    </div>\r\n    <div class=\"col-12\">\r\n      <div class=\"d-inline-block\">\r\n        <input type=\"checkbox\" name=\"is_kaisei\" class=\"\" id=\"is_kaisei\" v-model=\"params.is_kaisei\">\r\n        <label for=\"is_kaisei\">回生メーリスのみ:</label>\r\n      </div>\r\n      <div class=\"d-inline-block\">\r\n        <input type=\"checkbox\" name=\"is_zenkai\" class=\"\" id=\"is_zenkai\" v-model=\"params.is_zenkai\">\r\n        <label for=\"is_zenkai\">全回メーリスのみ:</label>\r\n      </div>\r\n      <div class=\"d-inline-block\">\r\n        <input type=\"checkbox\" name=\"is_bookmark\" class=\"\" id=\"is_bookmark\" v-model=\"params.is_bookmark\">\r\n        <label for=\"is_bookmark\">ブックマークのみ:</label>\r\n      </div>\r\n      <div class=\"d-inline-block\">\r\n        <input type=\"checkbox\" name=\"is_sender\" class=\"\" id=\"is_sender\" v-model=\"params.is_sender\">\r\n        <label for=\"is_sender\">送信したメーリスのみ:</label>\r\n      </div>\r\n    </div>\r\n    <button>検索</button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nexport default {\r\n  name: \"searchform\",\r\n  setup() {\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    const params = reactive({\r\n      is_kaisei: false,\r\n      is_zenkai: false,\r\n      is_bookmark: false,\r\n      is_sender: false,\r\n      text: \"\",\r\n      page: 1,\r\n    });\r\n\r\n    const submit = e => {\r\n      e.preventDefault();\r\n\r\n      // clean params\r\n      const query = {};\r\n      if (params.is_kaisei) {\r\n        query.is_kaisei = true;\r\n      }\r\n      if (params.is_zenkai) {\r\n        query.is_zenkai = true;\r\n      }\r\n      if (params.is_bookmark) {\r\n        query.is_bookmark = true;\r\n      }\r\n      if (params.is_sender) {\r\n        query.is_sender = true;\r\n      }\r\n      if (params.text.length > 0) {\r\n        query.text = params.text;\r\n      }\r\n      if (params.page > 1) {\r\n        query.page = params.page;\r\n      }\r\n\r\n      router.push({ query });\r\n    };\r\n\r\n    onMounted(() => {\r\n      if (route.query.is_kaisei && route.query.is_kaisei === \"true\") {\r\n        params.is_kaisei = true;\r\n      }\r\n      if (route.query.is_zenkai && route.query.is_zenkai === \"true\") {\r\n        params.is_zenkai = true;\r\n      }\r\n      if (route.query.is_bookmark && route.query.is_bookmark === \"true\") {\r\n        params.is_bookmark = true;\r\n      }\r\n      if (route.query.is_sender && route.query.is_sender === \"true\") {\r\n        params.is_sender = true;\r\n      }\r\n      if (route.query.text) {\r\n        params.text = route.query.text;\r\n      }\r\n      if (route.query.page && Number(route.query.page) > 1) {\r\n        params.page = Number(route.query.page);\r\n      }\r\n    });\r\n\r\n    return {\r\n      params,\r\n      submit\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\ninput.formtext{\r\n  display: inline-block;\r\n  width: 100%;\r\n  max-width: 30rem;\r\n}\r\n\r\ninput[type=\"checkbox\"]{\r\n  display: none;\r\n}\r\n\r\nlabel{\r\n    display: inline-block;\r\n    position: relative;\r\n    height: 1rem;\r\n    padding: 0.5rem 3rem 1rem 0;\r\n    margin: 0 0 0.5rem;\r\n    font-size: 0.7rem;\r\n    line-height: 0.7rem;\r\n}\r\nlabel:before{\r\n  display: inline-block;\r\n  content: \"\";\r\n  position: absolute;\r\n    right: 0.4rem;\r\n    top: 0.3rem;\r\n  width: 2.4rem;\r\n  height: 1.2rem;\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 1px solid #999;\r\n  border-radius: 1rem;\r\n  transition: 0.2s;\r\n}\r\nlabel:after{\r\n  display: block;\r\n  content: \"\";\r\n  position: absolute;\r\n  top: 0.44rem;\r\n  right: 1.7rem;\r\n  width: 0.9rem;\r\n  height: 0.9rem;\r\n  border-radius: 0.75rem;\r\n  background-color: #999;\r\n  transition: 0.2s;\r\n}\r\ninput:checked + label:before{\r\n  border-color: #0ee08a;\r\n}\r\ninput:checked + label:after{\r\n  right: 0.62rem;\r\n  background-color: #0ee08a;\r\n}\r\n\r\n</style>","<template>\r\n  <div>\r\n    <h1>mail/read - search</h1>\r\n    <search-form />\r\n    \r\n    <div v-if=\"nowLoading\">now loading</div>\r\n    <transition-group name=\"message-row\" v-else>\r\n      <one-message-row v-for=\"mes in messages\" :key=\"mes.id\" :message=\"mes\" class=\"one-message-row\" />\r\n    </transition-group>\r\n\r\n    <router-link :to=\"{query: differentPageQuery(2)}\">Next</router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, watch } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute } from \"vue-router\";\r\nimport oneMessageRow from \"./components/one-message-row.vue\";\r\nimport searchForm from \"./components/search-form.vue\";\r\nexport default {\r\n  components: {\r\n    oneMessageRow,\r\n    searchForm\r\n  },\r\n  setup() {\r\n    const store = useStore();\r\n    const route = useRoute();\r\n\r\n    watch(route, () => { updateMessage(); });\r\n\r\n    const messages = computed(() => store.state.read.messages);\r\n    const nowLoading = computed(() => store.state.read.nowLoading);\r\n\r\n    const cleanQuery = computed(() => {\r\n      const query = {};\r\n      if (route.query.is_kaisei && route.query.is_kaisei === \"true\") {\r\n        query.is_kaisei = true;\r\n      }\r\n      if (route.query.is_zenkai && route.query.is_zenkai === \"true\") {\r\n        query.is_zenkai = true;\r\n      }\r\n      if (route.query.is_bookmark && route.query.is_bookmark === \"true\") {\r\n        query.is_bookmark = true;\r\n      }\r\n      if (route.query.is_sender && route.query.is_sender === \"true\") {\r\n        query.is_sender = true;\r\n      }\r\n      if (route.query.text) {\r\n        query.text = route.query.text;\r\n      }\r\n      if (route.query.page && Number(route.query.page) > 1) {\r\n        query.page = Number(route.query.page);\r\n      }\r\n      return query;\r\n    });\r\n\r\n    const differentPageQuery = pageNum => {\r\n      return {\r\n        ...cleanQuery.value,\r\n        page: pageNum\r\n      };\r\n    };\r\n\r\n    const updateMessage = () => {\r\n      store.dispatch(\r\n        \"read/getMessagesFromAPI\", cleanQuery.value\r\n      );\r\n    };\r\n\r\n    if (messages.value.length === 0) {\r\n      updateMessage();\r\n    }\r\n    \r\n    onMounted(() => updateMessage());\r\n\r\n    return{\r\n      messages, nowLoading,\r\n      differentPageQuery\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.one-message-row{\r\n  display: block;\r\n}\r\n.message-row-leave-active{\r\n  position: absolute;\r\n}\r\n.message-row-move{\r\n  transition: all 0.5s;\r\n}\r\n/* .message-row-enter-active{\r\n  transition: all 5s;\r\n}\r\n.message-row-enter{\r\n  opacity: 0;\r\n}\r\n.message-row-enter-to{\r\n  opacity: 1;\r\n} */\r\n</style>","<template>\r\n  <header class=\"row content-header\">\r\n    <router-link :to=\"to\" class=\"back-arrow\"></router-link>\r\n    <h3>{{text}}</h3>\r\n  </header>\r\n</template>\r\n\r\n<script>\r\nimport { useStore } from \"vuex\";\r\nimport { computed } from \"vue\";\r\nexport default {\r\n  props: {\r\n    path: {type: [String, Object], required: false, default: () => \"../\"},\r\n    text: {type: String, required: true}\r\n  },\r\n  setup (props) {\r\n    const store = useStore();\r\n    const to = computed(() => {\r\n      if (store.state.lastPath) {\r\n        const { name, params, query } = store.state.lastPath;\r\n        return { name, params, query };\r\n      } else {\r\n        return props.path;\r\n      }\r\n    });\r\n    return {\r\n      to\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.content-header{\r\n  display: flex;\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 2rem;\r\n  width: 100%;\r\n}\r\n.content-header h3{\r\n  font-size: 1.5rem;\r\n\r\n}\r\n.back-arrow{\r\n  height: 24px;\r\n  width: 24px;\r\n  display: block;\r\n  position: relative;\r\n  overflow: hidden;\r\n  margin: 3px 0.5rem 3px 0.25rem;\r\n}\r\n.back-arrow:before{\r\n  content: '';\r\n  height: 12px;\r\n  width: 12px;\r\n  display: block;\r\n  border: 1px solid #333;\r\n  border-right-width: 0;\r\n  border-bottom-width: 0;\r\n  transform: rotate(-45deg);\r\n  -webkit-transform: rotate(-45deg);\r\n  -moz-transform: rotate(-45deg);\r\n  -o-transform: rotate(-45deg);\r\n  -ms-transform: rotate(-45deg);\r\n  position: absolute;\r\n  top: 5px;\r\n  left: 5px;\r\n}\r\n.back-arrow:after{\r\n  content: '';\r\n  height: 1px;\r\n  width: 20px;\r\n  display: block;\r\n  background: #333;\r\n  position: absolute;\r\n  top: 10.5px;\r\n  left: 3px;\r\n}\r\n</style>"],"names":[],"sourceRoot":""}